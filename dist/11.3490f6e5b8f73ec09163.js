(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{yHbH:function(t,e,n){"use strict";n.r(e);var i=n("Valr"),c=n("DUip"),r=n("o0su"),o=n("6onV"),a=function(t){return t.Success="success",t.Error="error",t.Pending="pending",t}({}),s=function(t){return t.Asc="asc",t.Desc="desc",t}({}),l=function(t){return t[t.Incremental=0]="Incremental",t[t.Full=1]="Full",t}({}),u=n("vlyQ"),p=n("zllq"),b=function(){return(b=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c]);return t}).apply(this,arguments)},d=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,c,r=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return o},f=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t},h=p.a.Browser,g=b({tabs:[],bookmarks:[],devices:[],selected_tab:-1,selection:[],dirsWithActiveFiles:{},expanded_details:!0,expanded_bookmarks:!0,expanded_devices:!0,expanded_places:!0,sorting:{column:"name",order:s.Asc},selected_snapshot:null,snapshot_view_mode:l.Full,current_diff:[],diff_is_loading:!1},r.f.reflateForFeature(h,"tabs","selected_tab","expanded_details","expanded_bookmarks","expanded_devices","expanded_places","bookmarks","sorting"));function v(t,e){var n=b(b({},t.tabs[t.selected_tab]),e),i=f(t.tabs);return i[t.selected_tab]=n,i}function m(t,e,n){return n[e].name===t[0].name?[n[e]]:function(t,e){var i=[];if(t<e){for(;t<=e;)i.push(n[t++]);i.reverse()}else for(;e<=t;)i.push(n[e++]);return i}(e,n.findIndex((function(e){return e.name===t[0].name})))}var O=Object(o.i)(g,Object(o.k)(u.A,(function(t){return b(b({},t),{current_diff:[]})})),Object(o.k)(u.i,(function(t,e){try{!function(t){if(-1===t.selected_tab&&t.tabs.length>0||-1!==t.selected_tab&&0===t.tabs.length)throw 0}(t)}catch(r){return b(b({},t),{tabs:[],selected_tab:-1})}if(!t.tabs||!t.tabs.length)return t;if(!e.names)return b(b({},t),{tabs:v(t,{read_status:a.Error})});var n=b({},t.tabs[t.selected_tab]),i=f([n.location.present],n.location.past);i.length>20&&i.splice(19,i.length-20);var c=v(t,{paths:e.paths,names:e.names,tab_name:e.isRoot?"root":e.tab_name,is_root:e.isRoot,location:e.track?{past:i,present:e.location,future:[]}:b({},n.location)});return b(b({},t),{selection:[],tabs:c})})),Object(o.k)(u.j,(function(t,e){var n=b({},t);switch(e.panel){case"bookmarks":return n.expanded_bookmarks=!t.expanded_bookmarks,n;case"devices":return n.expanded_devices=!t.expanded_devices,n;case"places":return n.expanded_places=!t.expanded_places,n;case"details":return n.expanded_details=!t.expanded_details,n}return t})),Object(o.k)(u.N,(function(t,e){return function(t,e){var n,i;if(t.devices.length!==e.devices.length)return!0;var c=function(t){if(!e.devices.some((function(e){return e.description===t.description})))return{value:!0}};try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t.devices),o=r.next();!o.done;o=r.next()){var a=c(o.value);if("object"==typeof a)return a.value}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return!1}(t,e)?b(b({},t),{expanded_devices:e.devices>t.devices||t.expanded_devices,devices:e.devices.map((function(t){return b(b({},t),{icon:"USB"===t.busType?"usb":"hdd",recent:!1})}))}):t})),Object(o.k)(u.m,(function(t,e){var n=e.index,i=e.shiftKey,c=e.ctrlKey,r=e.files;if(1===t.selection.length&&t.selection[0].name===r[n].name&&!c)return t;if(!i&&!c)return b(b({},t),{selection:[r[n]]});if(c){if(t.selection.some((function(t){return t.name===r[n].name}))){var o=t.selection.findIndex((function(t){return t.name===r[n].name})),a=f(t.selection);return a.splice(o,1),b(b({},t),{selection:a})}return b(b({},t),{selection:f(t.selection,[r[n]])})}return i?b(b({},t),{selection:m(t.selection,n,r)}):void 0})),Object(o.k)(u.J,(function(t,e){var n=e.column,i={column:n,order:n!==t.sorting.column?s.Asc:t.sorting.order===s.Asc?s.Desc:s.Asc};return b(b({},t),{sorting:i})})),Object(o.k)(u.O,(function(t,e){var n=e.steps,i=e.paths,c=e.names,r=e.is_root,o=e.tab_name,a=b({},t.tabs[t.selected_tab]),s=f(a.location.past);if(n>s.length)return t;var l=s.splice(0,n).reverse(),u=v(t,{paths:i,names:c,is_root:r,tab_name:r?"root":o,location:{past:s,present:l[0],future:f([a.location.present],l.splice(1).reverse(),a.location.future)}});return b(b({},t),{tabs:u,selection:[]})})),Object(o.k)(u.P,(function(t,e){var n=e.steps,i=e.paths,c=e.names,r=e.is_root,o=e.tab_name,a=b({},t.tabs[t.selected_tab]),s=f(a.location.future);if(n>s.length)return t;var l=s.splice(0,n).reverse(),u=v(t,{paths:i,names:c,is_root:r,tab_name:r?"root":o,location:{past:f([a.location.present],l.splice(1).reverse(),a.location.past),present:l[0],future:s}});return b(b({},t),{tabs:u,selection:[]})})),Object(o.k)(u.x,(function(t,e){var n=f(t.tabs||[],[e.tab]);return b(b({},t),{selection:[],selected_tab:n.length-1,tabs:n})})),Object(o.k)(u.c,(function(t,e){var n=e.index;if(!t.tabs||1===t.tabs.length||n<0||n>=t.tabs.length)return t;var i=f(t.tabs);return i.splice(n,1),b(b({},t),{selected_tab:Math.max(0,n<=t.selected_tab?t.selected_tab-1:t.selected_tab),tabs:i})})),Object(o.k)(u.K,(function(t,e){return!t.tabs||e.index<0||e.index>=t.tabs.length?t:b(b({},t),{selected_tab:e.index})})),Object(o.k)(u.I,(function(t,e){var n=v(t,{read_status:e.status});return b(b({},t),{tabs:n})})),Object(o.k)(u.G,(function(t,e){var n=e.dirPath,i=e.activeFiles,c=b({},t.dirsWithActiveFiles);return c[n]=!!i.length,b(b({},t),{dirsWithActiveFiles:c})})),Object(o.k)(u.l,(function(t,e){var n=e.path,i=e.basename,c=t.tabs[t.selected_tab];if(c.location.present!==e.dirname||!c.paths.includes(n))return t;var r=f(c.paths);r.splice(c.paths.findIndex((function(t){return t===n})),1);var o=f(c.names);return o.splice(c.names.findIndex((function(t){return t===i})),1),b(b({},t),{tabs:v(t,{paths:r,names:o})})})),Object(o.k)(u.k,(function(t,e){var n=e.path,i=e.basename,c=t.tabs[t.selected_tab];if(c.location.present!==e.dirname||c.paths.includes(n))return t;var r=f(c.paths,[n]),o=f(c.names,[i]);return b(b({},t),{tabs:v(t,{paths:r,names:o})})})),Object(o.k)(u.E,(function(t,e){var n,i=e.id,c=t.selection[0],r=(null===(n=c)||void 0===n?void 0:n.isDirectory)?c.path:t.tabs[t.selected_tab].location.present;return b(b({},t),{selected_snapshot:null===i?null:{rootPath:r,ancestorId:i,descendantId:i},current_diff:[]})})),Object(o.k)(u.F,(function(t,e){var n=e.id;if(!t.selected_snapshot)return t;var i=b({},t.selected_snapshot);return i.descendantId=n,b(b({},t),{selected_snapshot:i})})),Object(o.k)(u.M,(function(t,e){var n=e.mode;return b(b({},t),{snapshot_view_mode:n})})),Object(o.k)(u.H,(function(t,e){var n=e.diff;return b(b({},t),{current_diff:n})})),Object(o.k)(u.L,(function(t,e){var n=e.isLoading;return b(b({},t),{diff_is_loading:n})})));function j(t,e){return O(t,e)}var y=n("QjjB"),w=n("0DUh"),k=n("/pLB"),x=n("Sit1"),z=n("SpbU"),S=n("5q/S"),_=function(){return(_=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c]);return t}).apply(this,arguments)},C=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,c,r=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return o},T=Object(o.h)(h),$=Object(o.j)(T,(function(t){var e;return null===(e=t)||void 0===e?void 0:e.selected_tab})),P=Object(o.j)(T,(function(t){var e;return null===(e=t)||void 0===e?void 0:e.tabs})),M=Object(o.j)($,P,(function(t,e){var n;return t>=0&&(null===(n=e)||void 0===n?void 0:n.length)?_(_({},e[t]),{tab_idx:t}):null})),I=Object(o.j)(T,(function(t){return t.selection})),D=Object(o.j)(T,(function(t){return t.dirsWithActiveFiles})),F=Object(o.j)(T,(function(t){var e;return null===(e=t)||void 0===e?void 0:e.current_diff})),Y=Object(o.j)(T,(function(t){var e;return null===(e=t)||void 0===e?void 0:e.selected_snapshot})),Z=Object(o.j)(T,(function(t){var e;return null===(e=t)||void 0===e?void 0:e.snapshot_view_mode})),L=Object(o.j)(T,(function(t){var e;return null===(e=t)||void 0===e?void 0:e.diff_is_loading})),B=Object(o.j)(M,(function(t){var e;return(null===(e=t)||void 0===e?void 0:e.location)?t.location.present:null})),U=Object(o.j)(T,(function(t){return t&&t.tabs?new Set(t.tabs.reduce((function(t,e){return t.concat(e.location.future,e.location.past)}),[])):new Set})),E=Object(o.j)(I,M,Y,w.selectSnapshottedDirs,w.selectNodes,w.selectRecords,(function(t,e,n,i,c,r){var o;if(!(t&&e&&i&&c&&r))return null;function a(t,e){var i;return t?{node:c[t.nodeId],selectedId:e,rootPath:null===(i=n)||void 0===i?void 0:i.rootPath,snapshotsList:t.snapshotIds.map((function(t){return r[Object(z.n)([{type:x.f.Collection},{id:t}])]}))}:null}function s(){var t=i[e.location.present];return n&&e.location.present.startsWith(n.rootPath)?a(t,n.descendantId):a(t,null)}var l=t[0],u=i[null===(o=l)||void 0===o?void 0:o.path];return l&&u?n?l.path.startsWith(n.rootPath)?a(u,n.descendantId):l.isDirectory?a(u,null):s():a(u,null):s()})),A=Object(o.j)(M,F,E,y.d,(function(t,e,n,i){return t&&e&&n&&null!==n.selectedId&&i?e.filter((function(t){return t.was||t.is})).filter((function(t){var e,n;return(null===(e=t.was)||void 0===e?void 0:e[0].type)===x.f.Binary||(null===(n=t.is)||void 0===n?void 0:n[0].type)===x.f.Binary})).map((function(e){var n=C(e.was||e.is,2)[1];return[n.filename+n.ext,{name:n.filename+n.ext,atime:new Date(n.atime).getTime(),birthtime:new Date(n.birthtime).getTime(),ctime:new Date(n.atime).getTime(),ext:n.ext,isDirectory:!1,isHidden:!1,isSymbolicLink:!1,mime:n.mime,mtime:new Date(n.mtime).getTime(),path:t.location.present+i+n.filename+n.ext,size:n.fileSize,symLinkIsDirectory:!1,symLinkTarget:null,type:n.ext.slice(1)}]})):[]})),K=Object(o.j)(M,w.selectFiles,y.a,k.a,A,(function(t,e,n,i,c){var r;if(!Array.isArray(null===(r=t)||void 0===r?void 0:r.paths)||!e)return null;var o=new Map(c);return t.paths.map((function(t,n){return e[t]})).filter((function(t){var e;return!!t&&(o.delete(t.name),!(null===(e=n)||void 0===e||!e.show_hidden_files)||!t.isHidden)})).concat(function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(C(arguments[e]));return t}(o.values())).filter((function(t){var e=t.name,n=t.mime,c=t.ext,r=t.type;return!i||(i=i.toUpperCase(),e.toUpperCase().indexOf(i)>-1||!!n&&n.toUpperCase().indexOf(i)>-1||!!c&&c.toUpperCase().indexOf(i)>-1||!!r&&r.toUpperCase().indexOf(i)>-1)}))})),N=Object(o.j)(I,K,(function(t,e){if(!e||!t)return[];var n=new Map(e.map((function(t){return[t.path,t]})));return t.map((function(t){var e;return n.get(null===(e=t)||void 0===e?void 0:e.path)}))})),R=Object(o.j)(K,T,(function(t,e){var n=e.sorting;if(!t||!n)return t;var i=n.column,c=n.order===s.Asc?1:-1;return t.slice().sort((function(t,e){return t.isDirectory&&!e.isDirectory?-2:!t.isDirectory&&e.isDirectory?2:("string"==typeof t[i]&&"string"==typeof t[i]?t[i].toLocaleLowerCase()>e[i].toLocaleLowerCase():t[i]>e[i])?c:-c}))})),H=Object(o.j)(M,K,F,E,y.d,(function(t,e,n,i,c){if(!(t&&e&&n&&i&&null!==i.selectedId&&c))return{};var r=n.reduce((function(e,n){if(n.type===S.a.Untracked)return e.set(n.location,n);var i=n.was||n.is;return i&&i[0].type===x.f.Binary?e.set(t.location.present+c+i[1].filename+i[1].ext,n):e}),new Map);return e.reduce((function(t,e){return t[e.path]=r.get(e.path),t}),{})})),V=n("pugT"),W=n("x2cC"),G=n("WdUJ"),q=n("HZvm"),J=n("TYT/"),Q=n("DgGK"),X=n("0KcM"),tt=n("yTlr"),et=n("apbf"),nt=n("kZIA"),it=n("JB36"),ct=n("G6CK"),rt=n("MySR"),ot=n("Rarl"),at=["places_content"],st=["devices_content"],lt=["bookmarks_content"];function ut(t,e){if(1&t&&(J.Zb(0,"st-list-item",12),J.Ub(1,"i",13),J.lc(2,"titlecase"),J.Zb(3,"span",14),J.lc(4,"fileSize"),J.Mc(5),J.lc(6,"fileSize"),J.lc(7,"titlecase"),J.Yb(),J.Yb()),2&t){var n=e.$implicit;J.sc("type","list"),J.Cb(1),J.tc("nzType",n.icon),J.sc("title",J.mc(2,8,n.description)),J.Cb(2),J.sc("nzTooltipTitle",J.mc(4,10,n.size))("nzTooltipPlacement","right")("nzMouseEnterDelay",.5),J.Cb(2),J.Pc(" ",J.mc(6,12,n.size)," ",J.mc(7,14,n.description)," ")}}function pt(t,e){if(1&t&&(J.Zb(0,"div",9,10),J.Kc(2,ut,8,16,"st-list-item",11),J.Yb()),2&t){var n=J.kc(2);J.Cb(2),J.sc("ngForOf",n.browserState.devices)}}var bt=function(){return{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"}};function dt(t,e){if(1&t&&J.Ub(0,"nz-badge",15),2&t){var n=J.kc(2);J.sc("nzCount",n.browserState.devices.length)("nzStyle",J.vc(2,bt))}}function ft(t,e){if(1&t){var n=J.ac();J.Zb(0,"st-list-item",18),J.hc("mousedown",(function(t){J.Bc(n);var i=e.$implicit;return J.kc(3).navigate(i.path)})),J.Ub(1,"i",19),J.lc(2,"titlecase"),J.Zb(3,"span",14),J.Mc(4),J.Yb(),J.Yb()}if(2&t){var i=e.$implicit,c=J.kc(3);J.sc("activate",c.currentLocation===i.path)("type","list"),J.Cb(1),J.tc("nzType",i.icon),J.sc("title",J.mc(2,8,i.name)),J.Cb(2),J.sc("nzTooltipTitle",i.path)("nzTooltipPlacement","right")("nzMouseEnterDelay",.5),J.Cb(1),J.Nc(i.name)}}function ht(t,e){if(1&t&&(J.Zb(0,"div",9,16),J.Kc(2,ft,5,10,"st-list-item",17),J.Yb()),2&t){var n=J.kc(2);J.Cb(2),J.sc("ngForOf",n.userLocations)}}function gt(t,e){1&t&&J.Ub(0,"div",9,20)}function vt(t,e){if(1&t){var n=J.ac();J.Xb(0),J.Zb(1,"nz-space",1),J.Zb(2,"nz-space-item"),J.Zb(3,"st-small-collapse",2),J.hc("expandChange",(function(t){return J.Bc(n),J.kc().bookmarksPanelExpandChange.next([t,"devices"])})),J.Yb(),J.Yb(),J.Ub(4,"nz-divider"),J.Zb(5,"nz-space-item"),J.Zb(6,"st-small-collapse",3),J.hc("expandChange",(function(t){return J.Bc(n),J.kc().bookmarksPanelExpandChange.next([t,"places"])})),J.Yb(),J.Yb(),J.Ub(7,"nz-divider"),J.Zb(8,"nz-space-item"),J.Zb(9,"st-small-collapse",4),J.hc("expandChange",(function(t){return J.Bc(n),J.kc().bookmarksPanelExpandChange.next([t,"bookmarks"])})),J.Yb(),J.Yb(),J.Yb(),J.Kc(10,pt,3,1,"ng-template",null,5,J.Lc),J.Kc(12,dt,1,3,"ng-template",null,6,J.Lc),J.Kc(14,ht,3,1,"ng-template",null,7,J.Lc),J.Kc(16,gt,2,0,"ng-template",null,8,J.Lc),J.Wb()}if(2&t){var i=J.Ac(11),c=J.Ac(13),r=J.Ac(15),o=J.Ac(17),a=J.kc();J.Cb(1),J.sc("nzSize",0),J.Cb(2),J.sc("content",i)("headerExtra",c)("expanded",a.browserState.expanded_devices),J.Cb(3),J.sc("content",r)("expanded",a.browserState.expanded_places),J.Cb(3),J.sc("content",o)("expanded",a.browserState.expanded_bookmarks)}}var mt=function(){function t(){this.bookmarksPanelExpandChange=new J.n,this.goToPath=new J.n,this.userLocations=[],this.excludedLocations=["userData","temp"],this.icons={desktop:"laptop",documents:"file-text",downloads:"download",home:"home",music:"audio",pictures:"picture",videos:"play-square"},this.getUserLocations()}return t.prototype.ngOnInit=function(){},t.prototype.getUserLocations=function(){var t=Object(z.o)();for(var e in t)this.excludedLocations.includes(e)||this.userLocations.push({name:Object(z.c)(e),path:t[e],icon:this.icons[e]});this.userLocations.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}))},t.prototype.navigate=function(t){t!==this.currentLocation&&this.goToPath.next(t)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=J.Nb({type:t,selectors:[["st-bookmarks"]],viewQuery:function(t,e){var n;1&t&&(J.Rc(at,!0),J.Rc(st,!0),J.Rc(lt,!0)),2&t&&(J.zc(n=J.ic())&&(e.placesContent=n.first),J.zc(n=J.ic())&&(e.devicesContent=n.first),J.zc(n=J.ic())&&(e.bookmarksContent=n.first))},inputs:{browserState:"browserState",currentLocation:"currentLocation"},outputs:{bookmarksPanelExpandChange:"bookmarksPanelExpandChange",goToPath:"goToPath"},decls:1,vars:1,consts:[[4,"ngIf"],["nzDirection","vertical",3,"nzSize"],["headerText","devices",3,"content","headerExtra","expanded","expandChange"],["headerText","places",3,"content","expanded","expandChange"],["headerText","bookmarks",3,"content","expanded","expandChange"],["devices",""],["deviceHeaderExtra",""],["places",""],["bookmarks",""],[1,"panel"],["devices_content",""],[3,"type",4,"ngFor","ngForOf"],[3,"type"],["nz-icon","","nzTheme","outline",3,"nzType","title"],["nz-tooltip","",3,"nzTooltipTitle","nzTooltipPlacement","nzMouseEnterDelay"],[1,"site-badge-count-4",3,"nzCount","nzStyle"],["places_content",""],[3,"activate","type","mousedown",4,"ngFor","ngForOf"],[3,"activate","type","mousedown"],["nz-icon","","nzTheme","outline",1,"places-icon",3,"nzType","title"],["bookmarks_content",""]],template:function(t,e){1&t&&J.Kc(0,vt,18,8,"ng-container",0),2&t&&J.sc("ngIf",e.browserState)},directives:[i.t,Q.a,Q.b,X.a,tt.a,i.s,it.a,ct.a,rt.a,et.d,nt.a],pipes:[i.F,ot.a],styles:["[_nghost-%COMP%]{position:absolute;height:100%;left:0;top:0;overflow-y:auto;box-sizing:border-box;border-right:1px solid #e6e6e6}.panel[_ngcontent-%COMP%], [_nghost-%COMP%]{overflow-x:hidden}.panel[_ngcontent-%COMP%]{width:220px;text-overflow:ellipsis}st-small-collapse[_ngcontent-%COMP%]{display:block;box-sizing:border-box}st-list-item[_ngcontent-%COMP%]{font-size:11pt;text-overflow:ellipsis}i[_ngcontent-%COMP%]{margin-right:10px;margin-left:8px;font-size:12pt}nz-divider[_ngcontent-%COMP%]{margin:15px 0 3px}"],changeDetection:0}),t}(),Ot=n("AJqF"),jt=(n("ZepF"),n("dJ3e")),yt=n("xFDe"),wt=n("EA37"),kt=n("7dWL"),xt=n("AzBT"),zt=n("RQUG"),St=n("P4PA"),_t=n("Sh7c"),Ct=n("QJHY"),Tt=n("2FnW");function $t(t,e){if(1&t){var n=J.ac();J.Zb(0,"li",7),J.hc("click",(function(t){J.Bc(n);var i=e.index;return J.kc(2).navigate.next(i)})),J.Mc(1),J.lc(2,"shortenFilepath"),J.Yb()}if(2&t){var i=e.$implicit;J.Cb(1),J.Oc(" ",J.mc(2,1,i)," ")}}function Pt(t,e){if(1&t){var n=J.ac();J.Xb(0),J.Zb(1,"button",2),J.hc("click",(function(t){return J.Bc(n),J.kc().navigate.next(0)})),J.Ub(2,"i",3),J.Yb(),J.Zb(3,"nz-dropdown-menu",null,4),J.Zb(5,"ul",5),J.Kc(6,$t,3,3,"li",6),J.Yb(),J.Yb(),J.Wb()}if(2&t){var i=J.Ac(4),c=J.kc();J.Cb(1),J.sc("nzDropdownMenu",i)("nzPlacement","bottomLeft"),J.Cb(1),J.sc("nzType",c.icon),J.Cb(4),J.sc("ngForOf",c.history)}}function Mt(t,e){if(1&t&&(J.Zb(0,"button",8),J.Ub(1,"i",3),J.Yb()),2&t){var n=J.kc();J.Cb(1),J.sc("nzType",n.icon)}}var It=function(){function t(t){this.electronService=t,this.navigate=new J.n}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)(J.Tb(r.c))},t.\u0275cmp=J.Nb({type:t,selectors:[["st-navigation-button"]],inputs:{history:"history",icon:"icon"},outputs:{navigate:"navigate"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["deactivate",""],["nz-button","","nz-dropdown","","nzType","primary",3,"nzDropdownMenu","nzPlacement","click"],["nz-icon","","nzTheme","outline",3,"nzType"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["nz-menu-item","",3,"click"],["nz-button","","nzType","primary","disabled",""]],template:function(t,e){if(1&t&&(J.Kc(0,Pt,7,4,"ng-container",0),J.Kc(1,Mt,2,1,"ng-template",null,1,J.Lc)),2&t){var n=J.Ac(2);J.sc("ngIf",e.history&&e.history.length)("ngIfElse",n)}},directives:[i.t,xt.a,_t.a,rt.a,St.d,St.b,ct.a,St.e,Ct.c,i.s,Ct.f],pipes:[Tt.a],styles:[""],changeDetection:0}),t}(),Dt=["location"];function Ft(t,e){1&t&&J.Ub(0,"i",24)}function Yt(t,e){if(1&t&&J.Kc(0,Ft,1,0,"i",23),2&t){var n=J.kc(2);J.sc("ngIf","pending"===n.activeTab.read_status)}}function Zt(t,e){if(1&t){var n=J.ac();J.Zb(0,"div",9),J.Zb(1,"div",10),J.Zb(2,"nz-button-group"),J.Zb(3,"st-navigation-button",11),J.hc("navigate",(function(t){return J.Bc(n),J.kc().goBack.next(t)})),J.Yb(),J.Zb(4,"st-navigation-button",12),J.hc("navigate",(function(t){return J.Bc(n),J.kc().goForward.next(t)})),J.Yb(),J.Zb(5,"button",13),J.hc("click",(function(t){return J.Bc(n),J.kc().goUp.next(t)})),J.Ub(6,"i",14),J.Yb(),J.Yb(),J.Yb(),J.Zb(7,"div",10),J.Zb(8,"nz-button-group"),J.Zb(9,"button",15),J.hc("click",(function(t){return J.Bc(n),J.kc().goHome.next()})),J.Ub(10,"i",16),J.Yb(),J.Zb(11,"button",17),J.hc("click",(function(t){return J.Bc(n),J.kc().reload.next()})),J.Ub(12,"i",18),J.Yb(),J.Yb(),J.Yb(),J.Zb(13,"nz-input-group",19),J.Zb(14,"input",20,21),J.hc("keypress",(function(t){return J.Bc(n),J.kc().keyPress(t)})),J.Yb(),J.Yb(),J.Kc(16,Yt,1,1,"ng-template",null,22,J.Lc),J.Yb()}if(2&t){var i=J.Ac(17),c=J.kc();J.Cb(3),J.sc("history",null==c.activeTab.location?null:c.activeTab.location.past)("icon","arrow-left"),J.Cb(1),J.sc("history",null==c.activeTab.location?null:c.activeTab.location.future)("icon","arrow-right"),J.Cb(1),J.sc("disabled",c.activeTab.is_root),J.Cb(4),J.sc("disabled",(null==c.activeTab.location?null:c.activeTab.location.present)===c.home),J.Cb(4),J.sc("nzSuffix",i),J.Cb(1),J.sc("nzSize","small")("value",null==c.activeTab.location?null:c.activeTab.location.present)}}function Lt(t,e){if(1&t&&J.Ub(0,"i",25),2&t){var n=J.kc();J.sc("nzType","asc"===(null==n.browserState?null:n.browserState.sorting.order)?"down":"up")}}function Bt(t,e){if(1&t&&J.Ub(0,"i",25),2&t){var n=J.kc();J.sc("nzType","asc"===(null==n.browserState?null:n.browserState.sorting.order)?"down":"up")}}function Ut(t,e){if(1&t&&J.Ub(0,"i",25),2&t){var n=J.kc();J.sc("nzType","asc"===(null==n.browserState?null:n.browserState.sorting.order)?"down":"up")}}function Et(t,e){if(1&t&&J.Ub(0,"i",25),2&t){var n=J.kc();J.sc("nzType","asc"===(null==n.browserState?null:n.browserState.sorting.order)?"down":"up")}}var At=function(){function t(t){this.cd=t,this.mtime_width=130,this.size_width=65,this.type_width=70,this.icon_width=50,this.onSort=new J.n,this.goUp=new J.n,this.goBack=new J.n,this.goForward=new J.n,this.reload=new J.n,this.goHome=new J.n,this.goToPath=new J.n,this.home=Object(z.o)("home")}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){var t=this;setTimeout((function(){t.input&&(t.input.nativeElement.scrollLeft=t.input.nativeElement.scrollWidth)}),1)},t.prototype.keyPress=function(t){"Enter"===t.key&&this.goToPath.next(this.input.nativeElement.value)},t.\u0275fac=function(e){return new(e||t)(J.Tb(J.h))},t.\u0275cmp=J.Nb({type:t,selectors:[["st-navigation"]],viewQuery:function(t,e){var n;1&t&&J.Rc(Dt,!0),2&t&&J.zc(n=J.ic())&&(e.input=n.first)},inputs:{browserState:"browserState",activeTab:"activeTab",mtime_width:"mtime_width",size_width:"size_width",type_width:"type_width",icon_width:"icon_width"},outputs:{onSort:"onSort",goUp:"goUp",goBack:"goBack",goForward:"goForward",reload:"reload",goHome:"goHome",goToPath:"goToPath"},features:[J.Ab()],decls:19,vars:13,consts:[["id","navigation-bar",4,"ngIf"],["id","column-title-bar"],["id","icon"],["id","fname",1,"fixed-width"],[3,"click"],["class","sort-icon","nz-icon","","nzTheme","outline",3,"nzType",4,"ngIf"],["id","mtime",1,"fixed-width"],["id","size",1,"fixed-width"],["id","type",1,"fixed-width"],["id","navigation-bar"],["id","button-group"],["title","Go back",3,"history","icon","navigate"],["title","Go forward",3,"history","icon","navigate"],["id","up_btn","nz-button","","title","Go up",3,"disabled","click"],["nz-icon","","nzType","arrow-up","nzTheme","outline"],["id","home_btn","nz-button","","title","Home",3,"disabled","click"],["nz-icon","","nzType","home","nzTheme","outline"],["id","reload_btn","nz-button","","title","Reload",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],[3,"nzSuffix"],["nz-input","",3,"nzSize","value","keypress"],["location",""],["suffixIconSearch",""],["id","loading-icon","class","input-icon","nz-icon","","nzType","loading",4,"ngIf"],["id","loading-icon","nz-icon","","nzType","loading",1,"input-icon"],["nz-icon","","nzTheme","outline",1,"sort-icon",3,"nzType"]],template:function(t,e){1&t&&(J.Kc(0,Zt,18,9,"div",0),J.Zb(1,"div",1),J.Ub(2,"div",2),J.Zb(3,"div",3),J.Zb(4,"a",4),J.hc("click",(function(t){return e.onSort.next("name")})),J.Mc(5," name "),J.Yb(),J.Kc(6,Lt,1,1,"i",5),J.Yb(),J.Zb(7,"div",6),J.Zb(8,"a",4),J.hc("click",(function(t){return e.onSort.next("mtime")})),J.Mc(9," last modified "),J.Yb(),J.Kc(10,Bt,1,1,"i",5),J.Yb(),J.Zb(11,"div",7),J.Zb(12,"a",4),J.hc("click",(function(t){return e.onSort.next("size")})),J.Mc(13," size "),J.Yb(),J.Kc(14,Ut,1,1,"i",5),J.Yb(),J.Zb(15,"div",8),J.Zb(16,"a",4),J.hc("click",(function(t){return e.onSort.next("type")})),J.Mc(17," type "),J.Yb(),J.Kc(18,Et,1,1,"i",5),J.Yb(),J.Yb()),2&t&&(J.sc("ngIf",e.activeTab),J.Cb(2),J.Jc("width",e.icon_width+"px"),J.Cb(4),J.sc("ngIf","name"===(null==e.browserState?null:e.browserState.sorting.column)),J.Cb(1),J.Jc("width",e.mtime_width+"px"),J.Cb(3),J.sc("ngIf","mtime"===(null==e.browserState?null:e.browserState.sorting.column)),J.Cb(1),J.Jc("width",e.size_width+"px"),J.Cb(3),J.sc("ngIf","size"===(null==e.browserState?null:e.browserState.sorting.column)),J.Cb(1),J.Jc("width",e.type_width+15+"px"),J.Cb(3),J.sc("ngIf","type"===(null==e.browserState?null:e.browserState.sorting.column)))},directives:[i.t,xt.b,rt.a,It,xt.a,_t.a,ct.a,zt.c,zt.b],styles:['#column-title-bar[_ngcontent-%COMP%]{height:24px;z-index:1;box-sizing:border-box;border-bottom:1px solid #e6e6e6;border-top:1px solid #e6e6e6}#column-title-bar[_ngcontent-%COMP%], #navigation-bar[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between}#navigation-bar[_ngcontent-%COMP%]{height:42px;line-height:40px;margin-top:-10px;background-color:#fafafa}nz-input-group[_ngcontent-%COMP%]{height:32px;-webkit-box-flex:1;flex:1;margin-left:10px;margin-top:6px;margin-right:10px;font-size:10pt;font-weight:400;font-family:Montserrat}nz-button-group[_ngcontent-%COMP%]{-webkit-transform:translateY(-1px);transform:translateY(-1px)}.watched[_ngcontent-%COMP%]{background-color:"#f4fff2"}#button-group[_ngcontent-%COMP%]{margin-top:3px;margin-left:10px}#icon[_ngcontent-%COMP%]{padding-left:10px}.input-icon[_ngcontent-%COMP%]{margin-top:2px;font-size:12pt}#loading-icon[_ngcontent-%COMP%]{color:#696f74}#error-icon[_ngcontent-%COMP%]{color:red}#fname[_ngcontent-%COMP%]{line-height:20px;-webkit-box-flex:1;flex:1}#size[_ngcontent-%COMP%]{right:0}.fixed-width[_ngcontent-%COMP%]{line-height:20px;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;font-size:8pt}'],changeDetection:0}),t}(),Kt=n("l+6v"),Nt=function(){function t(){}return t.prototype.transform=function(t,e){var n;return!!e&&(e.selection.length&&(null===(n=document.getElementById(e.selection[0].name))||void 0===n||n.scrollIntoView({block:"nearest"})),void 0!==e.selection.find((function(e){return e.name===t.name})))},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=J.Sb({name:"activateFile",type:t,pure:!0}),t}(),Rt=["container"];function Ht(t,e){if(1&t){var n=J.ac();J.Zb(0,"div",14),J.hc("click",(function(t){J.Bc(n);var e=J.kc(2).index;return J.kc(2).closeTab.next(e)})),J.Ub(1,"i",15),J.Yb()}2&t&&(J.Cb(1),J.Jc("font-size","8pt"))}function Vt(t,e){if(1&t){var n=J.ac();J.Zb(0,"div",11),J.hc("auxclick",(function(t){J.Bc(n);var e=J.kc().index;return J.kc(2).maybeClose(t,e)})),J.Zb(1,"div",12),J.Mc(2),J.Yb(),J.Kc(3,Ht,2,2,"div",13),J.Yb()}if(2&t){var i=J.kc().$implicit,c=J.kc(2);J.Cb(2),J.Oc(" ",i.tab_name," "),J.Cb(1),J.sc("ngIf",c.browserState.tabs.length>1)}}function Wt(t,e){if(1&t){var n=J.ac();J.Zb(0,"st-file-list-item",18),J.hc("mousedown",(function(t){J.Bc(n);var i=e.index;return J.kc(4).select(t,i)}))("dblclick",(function(t){J.Bc(n);var i=e.$implicit;return J.kc(4).onDoubleClick(i)}))("contextmenu",(function(t){J.Bc(n);var i=e.index,c=e.$implicit;return J.kc(4).contextMenu(t,i,c)})),J.lc(1,"activateFile"),J.Yb()}if(2&t){var i=e.$implicit,c=J.kc(2).$implicit,r=J.kc(2);J.sc("id",i.name)("activate",J.nc(1,13,i,r.browserState))("file",i)("type_width",r.type_width)("size_width",r.size_width)("mtime_width",r.mtime_width)("icon_width",r.icon_width)("tracker",r.trackers[i.path])("icons",r.icons)("dirHasActiveFiles",r.dirsWithActiveFiles[i.path])("isSnapshotted",!!r.snapshots[i.path])("diff",r.diffs?r.diffs[i.path]:null)("diffModeOn",!!r.diffs&&(null==c?null:c.location.present.startsWith(null==r.activeSnapshot?null:r.activeSnapshot.rootPath)))}}function Gt(t,e){if(1&t){var n=J.ac();J.Zb(0,"div",16),J.hc("contextmenu",(function(t){return J.Bc(n),J.kc(3).contextMenu(t)})),J.Kc(1,Wt,2,16,"st-file-list-item",17),J.Yb()}if(2&t){var i=J.kc(3);J.Jc("height",i.containerHeight),J.Cb(1),J.sc("ngForOf",i.files)}}function qt(t,e){if(1&t&&J.Ub(0,"nz-empty",19),2&t){var n=J.kc(3);J.sc("nzNotFoundContent",n.getEmptyText())}}function Jt(t,e){if(1&t){var n=J.ac();J.Zb(0,"nz-tab",6),J.Kc(1,Vt,4,2,"ng-template",null,7,J.Lc),J.Zb(3,"st-navigation",8),J.hc("goBack",(function(t){return J.Bc(n),J.kc(2).goBack.next(t)}))("goForward",(function(t){return J.Bc(n),J.kc(2).goForward.next(t)}))("goUp",(function(t){return J.Bc(n),J.kc(2).goUp.next(t)}))("goHome",(function(t){return J.Bc(n),J.kc(2).goHome.next()}))("reload",(function(t){return J.Bc(n),J.kc(2).reload.next()}))("onSort",(function(t){return J.Bc(n),J.kc(2).onSort.next(t)}))("goToPath",(function(t){return J.Bc(n),J.kc(2).goToPath.next(t)})),J.Yb(),J.Kc(4,Gt,2,3,"div",9),J.Kc(5,qt,1,1,"nz-empty",10),J.Yb()}if(2&t){var i=J.Ac(2),c=J.kc(2);J.sc("nzTitle",i),J.Cb(3),J.sc("type_width",c.type_width)("size_width",c.size_width)("mtime_width",c.mtime_width)("icon_width",c.icon_width)("browserState",c.browserState)("activeTab",c.activeTab),J.Cb(1),J.sc("ngIf",c.files&&c.files.length),J.Cb(1),J.sc("ngIf",!(null!=c.files&&c.files.length)&&"success"===c.activeTab.read_status)}}function Qt(t,e){if(1&t){var n=J.ac();J.Zb(0,"i",20),J.hc("click",(function(t){return J.Bc(n),J.kc(2).newTab.next()})),J.Yb(),J.Zb(1,"i",21),J.hc("click",(function(t){return J.Bc(n),J.kc(2).detailsExpandChange.next()})),J.Yb()}if(2&t){var i=J.kc(2);J.Jc("margin-right",5,"px")("margin-top",10,"px"),J.Cb(1),J.Jc("margin-right",5,"px")("margin-top",10,"px"),J.sc("nzType",i.browserState.expanded_details?"double-right":"double-left")}}function Xt(t,e){if(1&t){var n=J.ac();J.Zb(0,"div",1,2),J.Zb(2,"nz-tabset",3),J.hc("nzSelectChange",(function(t){return J.Bc(n),J.kc().tabChange.next(t)})),J.Kc(3,Jt,6,9,"nz-tab",4),J.Yb(),J.Kc(4,Qt,2,9,"ng-template",null,5,J.Lc),J.Yb()}if(2&t){var i=J.Ac(5),c=J.kc();J.Cb(2),J.sc("nzType","line")("nzSize","small")("nzTabBarExtraContent",i)("nzSelectedIndex",c.browserState.selected_tab),J.Cb(1),J.sc("ngForOf",c.browserState.tabs)}}var te=function(){function t(t,e,n){var i=this;this.windowEventsService=t,this.modalService=e,this.menuFactory=n,this.trackers={},this.dirsWithActiveFiles={},this.onSelect=new J.n,this.open=new J.n,this.onSort=new J.n,this.goUp=new J.n,this.goBack=new J.n,this.goForward=new J.n,this.goHome=new J.n,this.reload=new J.n,this.goToPath=new J.n,this.newTab=new J.n,this.tabChange=new J.n,this.closeTab=new J.n,this.detailsExpandChange=new J.n,this.subscription=new V.a,this.containerHeight=null,this.author_width=100,this.mtime_width=130,this.size_width=65,this.type_width=70,this.icon_width=50,this.adjustHeight=function(){i.containerHeight=i.container.nativeElement.offsetHeight-108+"px"}}return t.prototype.ngOnInit=function(){this.subscription.add(this.windowEventsService.onresize$.pipe(Object(Ot.a)(0)).subscribe(this.adjustHeight))},t.prototype.ngAfterViewInit=function(){this.adjustHeight()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.select=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];2===t[0].button&&this.selection.length>1||this.onSelect.next(t)},t.prototype.maybeClose=function(t,e){!t||2!==t.which&&4!==t.button||this.closeTab.next(e)},t.prototype.onDoubleClick=function(t){this.open.next(t)},t.prototype.contextMenu=function(t,e,n){var i,c;n&&this.browserState.selection.length<2&&this.select(t,e),n&&((null===(c=null===(i=this.browserState)||void 0===i?void 0:i.selection)||void 0===c?void 0:c.length)>1?this.menuFactory.forFiles().forSelection({selection:this.selection}).show(t):n&&n.isDirectory?this.menuFactory.forFolders().forSingle({file:n}).show(t):this.menuFactory.forFiles().forSingle({file:n}).show(t))},t.prototype.getEmptyText=function(){return this.filterText?'No items for filter "'+this.filterText+'"':"No items in folder"},t.\u0275fac=function(e){return new(e||t)(J.Tb(r.g),J.Tb(jt.a),J.Tb(yt.a))},t.\u0275cmp=J.Nb({type:t,selectors:[["st-tree-browser"]],viewQuery:function(t,e){var n;1&t&&J.Rc(Rt,!0),2&t&&J.zc(n=J.ic())&&(e.container=n.first)},inputs:{browserState:"browserState",files:"files",selection:"selection",activeTab:"activeTab",trackers:"trackers",filterText:"filterText",icons:"icons",snapshots:"snapshots",dirsWithActiveFiles:"dirsWithActiveFiles",diffs:"diffs",activeSnapshot:"activeSnapshot"},outputs:{onSelect:"onSelect",open:"open",onSort:"onSort",goUp:"goUp",goBack:"goBack",goForward:"goForward",goHome:"goHome",reload:"reload",goToPath:"goToPath",newTab:"newTab",tabChange:"tabChange",closeTab:"closeTab",detailsExpandChange:"detailsExpandChange"},decls:1,vars:1,consts:[["id","container",4,"ngIf"],["id","container"],["container",""],[3,"nzType","nzSize","nzTabBarExtraContent","nzSelectedIndex","nzSelectChange"],[3,"nzTitle",4,"ngFor","ngForOf"],["extraTemplate",""],[3,"nzTitle"],["titleTemplate",""],[3,"type_width","size_width","mtime_width","icon_width","browserState","activeTab","goBack","goForward","goUp","goHome","reload","onSort","goToPath"],["id","list",3,"height","contextmenu",4,"ngIf"],[3,"nzNotFoundContent",4,"ngIf"],["id","tab",3,"auxclick"],["id","tab-name"],["id","close-btn",3,"click",4,"ngIf"],["id","close-btn",3,"click"],["nz-icon","","nzType","close",1,"ant-tabs-close-x"],["id","list",3,"contextmenu"],["draggable","true",3,"id","activate","file","type_width","size_width","mtime_width","icon_width","tracker","icons","dirHasActiveFiles","isSnapshotted","diff","diffModeOn","mousedown","dblclick","contextmenu",4,"ngFor","ngForOf"],["draggable","true",3,"id","activate","file","type_width","size_width","mtime_width","icon_width","tracker","icons","dirHasActiveFiles","isSnapshotted","diff","diffModeOn","mousedown","dblclick","contextmenu"],[3,"nzNotFoundContent"],["nz-icon","","nzType","plus","title","New tab",1,"ant-tabs-new-tab",3,"click"],["nz-icon","","title","Show/hide details",1,"ant-tabs-new-tab",3,"nzType","click"]],template:function(t,e){1&t&&J.Kc(0,Xt,6,5,"div",0),2&t&&J.sc("ngIf",e.browserState)},directives:[i.t,wt.f,i.s,wt.b,At,ct.a,rt.a,Kt.a,kt.b],pipes:[Nt],styles:["[_nghost-%COMP%]{position:absolute;height:100%;left:220px}#list[_ngcontent-%COMP%], [_nghost-%COMP%]{top:0;width:100%}#list[_ngcontent-%COMP%]{position:relative;overflow-y:scroll;overflow-x:hidden}#container[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}#tab[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;max-width:140px;min-width:50px;display:-webkit-box;display:flex}#tab[_ngcontent-%COMP%]   #tab-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;float:1}#tab[_ngcontent-%COMP%]   #close-btn[_ngcontent-%COMP%]{margin-left:5px;right:0}i[_ngcontent-%COMP%]{margin-left:5px}nz-empty[_ngcontent-%COMP%]{margin-top:50px}"],changeDetection:0}),t}(),ee=(n("tSEv"),n("/Mfw"),n("d546")),ne=n("I51I"),ie=n("jfam"),ce=n("IjwS"),re=n("JcEs"),oe=n("s+w9"),ae=n("vjwB"),se=n("Q4PE"),le=n("Oqql"),ue=function(){function t(){}return t.prototype.transform=function(t){return t.history&&t.history.length?(t.metadata.fileSize-t.history[0].fileSize)/t.history[0].fileSize:null},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=J.Sb({name:"getEditDifference",type:t,pure:!0}),t}(),pe=n("TYzs");function be(t,e){if(1&t&&(J.Zb(0,"nz-timeline-item",6),J.Ub(1,"st-binary-leaf",7),J.Yb()),2&t){var n=e.$implicit,i=e.index,c=J.kc().ngIf,r=J.kc(),o=J.Ac(3);J.sc("nzColor","green")("nzDot",0===i?o:null),J.Cb(1),J.sc("file",r.file)("historyItem",n)("prevHistoryItem",c[i-1])("tracker",r.tracker)("recordLabels",r.recordLabels)("me",r.me)}}function de(t,e){if(1&t&&(J.Xb(0),J.Kc(1,be,2,8,"nz-timeline-item",5),J.Wb()),2&t){var n=e.ngIf;J.Cb(1),J.sc("ngForOf",n)}}function fe(t,e){1&t&&J.Ub(0,"i",8)}function he(t,e){1&t&&J.Ub(0,"i",9),2&t&&J.sc("nzTwotoneColor","#ffb400")}function ge(t,e){if(1&t&&(J.Mc(0),J.lc(1,"ordinal")),2&t){var n=J.kc(2);J.Oc(" ",J.mc(1,1,(null==n.tracker?null:n.tracker.metadata.changes)-1)," change ")}}function ve(t,e){if(1&t){var n=J.ac();J.Zb(0,"nz-comment",10),J.lc(1,"fuzzyDate"),J.Zb(2,"nz-comment-action"),J.Mc(3),J.lc(4,"fileSize"),J.Ub(5,"i",11),J.Mc(6),J.lc(7,"percent"),J.lc(8,"getEditDifference"),J.Yb(),J.Zb(9,"nz-comment-action"),J.Zb(10,"span",12),J.hc("click",(function(t){return J.Bc(n),J.kc().revert()})),J.Ub(11,"i",13),J.Mc(12," Revert"),J.Yb(),J.Yb(),J.Yb(),J.Kc(13,ge,2,3,"ng-template",null,14,J.Lc)}if(2&t){var i=J.Ac(14),c=J.kc();J.sc("nzAuthor",i)("nzDatetime",J.mc(1,4,null==c.tracker?null:null==c.tracker.metadata?null:c.tracker.metadata.updated)),J.Cb(3),J.Oc(" ",J.mc(4,6,null==c.tracker?null:c.tracker.metadata.fileSize)," ("),J.Cb(3),J.Oc(" ",J.mc(7,8,J.mc(8,10,c.tracker)),") ")}}var me=function(){function t(t){this.modalService=t,this.goToRecord=new J.n}return t.prototype.ngOnInit=function(){},t.prototype.revert=function(){var t=this,e=this.tracker.history[0];this.modalService.confirmRevertFile(e.filename+e.ext,this.recordLabels[x.f.Binary+":"+e.id],(function(){return t.goToRecord.next(e)}))},t.\u0275fac=function(e){return new(e||t)(J.Tb(jt.a))},t.\u0275cmp=J.Nb({type:t,selectors:[["st-tracked-file-detail"]],inputs:{tracker:"tracker",me:"me",file:"file",recordLabels:"recordLabels"},outputs:{goToRecord:"goToRecord"},decls:8,vars:4,consts:[["nzMode","left",3,"nzPending","nzReverse","nzPendingDot"],[4,"ngIf"],["dotRootTemplate",""],["pendingDot",""],["inEdit",""],[3,"nzColor","nzDot",4,"ngFor","ngForOf"],[3,"nzColor","nzDot"],[3,"file","historyItem","prevHistoryItem","tracker","recordLabels","me"],["nz-icon","","nzType","file-add","nzTheme","outline",2,"font-size","14px","color","#20c95e"],["nz-icon","","nzType","edit","nzTheme","twotone",3,"nzTwotoneColor"],[3,"nzAuthor","nzDatetime"],["nz-icon","","nzType","rise","nzTheme","outline"],[3,"click"],["nz-icon","","nzType","undo","nzTheme","outline"],["author",""]],template:function(t,e){if(1&t&&(J.Zb(0,"nz-timeline",0),J.Kc(1,de,2,1,"ng-container",1),J.Yb(),J.Kc(2,fe,1,0,"ng-template",null,2,J.Lc),J.Kc(4,he,1,1,"ng-template",null,3,J.Lc),J.Kc(6,ve,15,12,"ng-template",null,4,J.Lc)),2&t){var n=J.Ac(5),i=J.Ac(7);J.sc("nzPending",!(null==e.tracker||!e.tracker.edited)&&i)("nzReverse",!0)("nzPendingDot",n),J.Cb(1),J.sc("ngIf",null==e.tracker?null:e.tracker.history.slice().reverse())}},directives:[oe.a,i.t,i.s,oe.b,se.a,ct.a,rt.a,ae.d,ae.a],pipes:[le.a,ot.a,i.C,ue,pe.a],styles:["#time-line[_ngcontent-%COMP%]{position:relative;width:370px;top:0;bottom:0;margin:0 auto}.count[_ngcontent-%COMP%]{padding-left:8px;cursor:auto}"],changeDetection:0}),t}(),Oe=n("gRUR"),je=n("FFOo"),ye=n("G5J1"),we=n("9Z1F"),ke=function(){function t(){}return t.prototype.transform=function(t){if(!t)return!1;var e=t.snapshotsList.find((function(e){return e.id===t.selectedId}));return!!e&&e.mode!==x.h.Snapshot},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=J.Sb({name:"snapshotIsEdited",type:t,pure:!0}),t}(),xe=n("9jaY"),ze=n("w1ql"),Se=n("du9V"),_e=n("w3Dg"),Ce=n("QJY3"),Te=function(){function t(){}return t.prototype.transform=function(t){if(!t)return null;if("number"!=typeof t.selectedId)return null;var e=t.snapshotsList.find((function(e){return e.id===t.selectedId}));return e?{message:"Snapshot: "+e.ref,description:"Created on "+new Date(e.created).toLocaleString()+": "+(e.description||"[No description]")}:null},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=J.Sb({name:"activeSnapshotInfo",type:t,pure:!0}),t}(),$e=function(){function t(){}return t.prototype.transform=function(t){if(!t)return null;var e=new le.a,n=t.ref;return n.length>30&&(n=n.slice(0,30)+"..."),n+" ("+e.transform(t.created)+")"},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=J.Sb({name:"snapshotOptionLabel",type:t,pure:!0}),t}();function Pe(t,e){if(1&t&&(J.Ub(0,"nz-option",6),J.lc(1,"snapshotOptionLabel")),2&t){var n=e.$implicit;J.sc("nzLabel",J.mc(1,2,n))("nzValue",n.id)}}function Me(t,e){if(1&t&&(J.Xb(0),J.Ub(1,"nz-alert",7),J.Wb()),2&t){var n=e.ngIf;J.Cb(1),J.sc("nzMessage",n.message)("nzDescription",n.description)}}var Ie=function(){return[]},De=function(){function t(t,e,n,i,c){this.engine=t,this.store=e,this.actions=n,this.cdr=i,this.menuFactory=c,this.snapshotSelected=new J.n,this._subs=new je.a}return Object.defineProperty(t.prototype,"activeSnapshot",{set:function(t){var e=this;this._active=t,setTimeout((function(){return e.cdr.detectChanges()}),100)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.selectSnapshot=function(t){this.snapshotSelected.next(t)},t.prototype.contextMenu=function(t){var e,n=this,i=(new ke).transform(this._active),c=[this._active.node,this._active.snapshotsList.find((function(t){return t.id===n._active.selectedId}))];this._subs.add(this.menuFactory.forCollectionNode().forSingleRecord({element:c,propertiesToEdit:xe.c[c[0].type],disableEditProperties:"number"!=typeof(null===(e=this._active)||void 0===e?void 0:e.selectedId),disableShowEdits:!i}).show(t).subscribe((function(t){if("Edit properties"===t.label){var e=t.action;n._subs.add(n.actions.pipe(Object(Oe.d)(e.correlationId,W.V,W.Db),Object(we.a)((function(t){return ye.a}))).subscribe((function(t){var e=t.element;return n.store.dispatch(Object(u.E)(e[1].id))})))}})))},t.prototype.ngOnDestroy=function(){this._subs.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(J.Tb(jt.b),J.Tb(o.b),J.Tb(ze.a),J.Tb(J.h),J.Tb(yt.a))},t.\u0275cmp=J.Nb({type:t,selectors:[["st-single-folder-details"]],inputs:{file:"file",activeSnapshot:"activeSnapshot"},outputs:{snapshotSelected:"snapshotSelected"},decls:9,vars:13,consts:[[3,"nzDirection","nzSize"],["nzAllowClear","",3,"ngModel","nzPlaceHolder","disabled","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-button","","nzShape","circle",3,"disabled","click"],["nz-icon","","nzType","more","nzTheme","outline"],[4,"ngIf"],[3,"nzLabel","nzValue"],["nzType","info",3,"nzMessage","nzDescription"]],template:function(t,e){1&t&&(J.Zb(0,"nz-space",0),J.Zb(1,"nz-space-item"),J.Zb(2,"nz-select",1),J.hc("ngModelChange",(function(t){return e.selectSnapshot(t)})),J.Kc(3,Pe,2,4,"nz-option",2),J.Yb(),J.Zb(4,"button",3),J.hc("click",(function(t){return e.contextMenu(t)})),J.Ub(5,"i",4),J.Yb(),J.Yb(),J.Zb(6,"nz-space-item"),J.Kc(7,Me,2,2,"ng-container",5),J.lc(8,"activeSnapshotInfo"),J.Yb(),J.Yb()),2&t&&(J.sc("nzDirection","vertical")("nzSize",20),J.Cb(2),J.sc("ngModel",null==e._active?null:e._active.selectedId)("nzPlaceHolder","Select a snapshot ("+((null==e._active?null:e._active.snapshotsList.length)||0)+" available)")("disabled",!e._active),J.Cb(1),J.sc("ngForOf",(null==e._active?null:e._active.snapshotsList)||J.vc(12,Ie)),J.Cb(1),J.Jc("margin-left","5px"),J.sc("disabled",!(null!=e._active&&e._active.selectedId)),J.Cb(3),J.sc("ngIf",J.mc(8,10,e._active)))},directives:[Q.a,Q.b,Se.e,Ce.m,Ce.p,i.s,xt.a,_t.a,rt.a,ct.a,i.t,Se.a,_e.a],pipes:[Te,$e],styles:["nz-select[_ngcontent-%COMP%]{width:324px}"],changeDetection:0}),t}(),Fe=n("xeYQ");function Ye(t,e){if(1&t&&J.Ub(0,"st-folder-action-buttons",13),2&t){var n=J.kc(2);J.sc("file",n.file)}}function Ze(t,e){if(1&t&&J.Ub(0,"st-file-action-buttons",14),2&t){var n=J.kc(2);J.sc("file",n.file)("tracker",n.tracker)("diff",n.diff)}}function Le(t,e){if(1&t){var n=J.ac();J.Zb(0,"div",18),J.Zb(1,"st-tracked-file-detail",19),J.hc("goToRecord",(function(t){return J.Bc(n),J.kc(3).goToRecord(t)})),J.Yb(),J.Yb()}if(2&t){var i=J.kc(3);J.Cb(1),J.sc("file",i.file)("tracker",i.tracker)("me",i.me)("recordLabels",i.recordLabels)}}function Be(t,e){1&t&&(J.Zb(0,"div",20),J.Ub(1,"i",21),J.Mc(2," No recent history available for file. "),J.Yb())}function Ue(t,e){if(1&t&&(J.Xb(0),J.Ub(1,"nz-divider",15),J.Kc(2,Le,2,4,"div",16),J.Kc(3,Be,3,0,"ng-template",null,17,J.Lc),J.Wb()),2&t){var n=J.Ac(4),i=J.kc(2);J.Cb(2),J.sc("ngIf",null==i.tracker?null:i.tracker.history)("ngIfElse",n)}}function Ee(t,e){if(1&t){var n=J.ac();J.Ub(0,"nz-divider",22),J.Zb(1,"st-single-folder-details",23),J.hc("snapshotSelected",(function(t){return J.Bc(n),J.kc(2).snapshotSelected.next(t)})),J.Yb()}if(2&t){var i=J.kc(2);J.Cb(1),J.sc("file",i.file)("activeSnapshot",i.activeSnapshot)}}function Ae(t,e){if(1&t&&(J.Xb(0),J.Zb(1,"nz-space",1),J.Zb(2,"nz-space-item"),J.Ub(3,"st-media-preview-pane",2),J.Yb(),J.Zb(4,"nz-space-item"),J.Zb(5,"div",3),J.Zb(6,"nz-page-header",4),J.Zb(7,"nz-page-header-title"),J.Zb(8,"div",5),J.Ub(9,"img",6),J.lc(10,"getFileIcon"),J.Yb(),J.Zb(11,"div",7),J.Mc(12),J.Yb(),J.Yb(),J.Zb(13,"nz-page-header-subtitle"),J.Mc(14),J.lc(15,"fileSize"),J.Yb(),J.Zb(16,"nz-page-header-extra"),J.Kc(17,Ye,1,1,"st-folder-action-buttons",8),J.Kc(18,Ze,1,3,"ng-template",null,9,J.Lc),J.Yb(),J.Zb(20,"nz-page-header-content"),J.Ub(21,"st-file-stats",10),J.Kc(22,Ue,5,2,"ng-container",11),J.Kc(23,Ee,2,2,"ng-template",null,12,J.Lc),J.Yb(),J.Yb(),J.Yb(),J.Yb(),J.Yb(),J.Wb()),2&t){var n=J.Ac(19),i=J.Ac(24),c=J.kc();J.Cb(1),J.sc("nzSize",0),J.Cb(2),J.sc("file",c.file)("autoplay",null==c.settings?null:c.settings.autoplay_preview_media)("expanded",c.expanded),J.Cb(3),J.sc("nzGhost",!1),J.Cb(3),J.sc("src",J.nc(10,15,c.file,c.icons),J.Dc),J.Cb(3),J.Oc(" ",c.file.name," "),J.Cb(2),J.Nc(J.mc(15,18,c.file.size)),J.Cb(3),J.sc("ngIf",c.file.isDirectory)("ngIfElse",n),J.Cb(4),J.sc("file",c.file)("tracker",c.tracker)("recordLabels",c.recordLabels),J.Cb(1),J.sc("ngIf",!c.file.isDirectory)("ngIfElse",i)}}var Ke=function(){function t(t){var e=this;this.store=t,this.snapshotSelected=new J.n,this.subscription=new V.a,this.subscription.add(t.select(y.c).subscribe((function(t){return e.icons=t})))}return t.prototype.ngOnInit=function(){},t.prototype.goToRecord=function(t){this.store.dispatch(Object(W.kb)([this.tracker.node,t]))},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(J.Tb(o.b))},t.\u0275cmp=J.Nb({type:t,selectors:[["st-single-file-details"]],inputs:{file:"file",settings:"settings",expanded:"expanded",tracker:"tracker",activeSnapshot:"activeSnapshot",recordLabels:"recordLabels",me:"me",diff:"diff"},outputs:{snapshotSelected:"snapshotSelected"},decls:1,vars:1,consts:[[4,"ngIf"],["nzDirection","vertical",3,"nzSize"],[3,"file","autoplay","expanded"],["id","stats"],[3,"nzGhost"],["id","icon"],[3,"src"],["id","title"],[3,"file",4,"ngIf","ngIfElse"],["fileButtons",""],[3,"file","tracker","recordLabels"],[4,"ngIf","ngIfElse"],["isDirectory",""],[3,"file"],[3,"file","tracker","diff"],["nzText","Tracking history","nzOrientation","left"],["id","time-line",4,"ngIf","ngIfElse"],["noTrackerInfo",""],["id","time-line"],[3,"file","tracker","me","recordLabels","goToRecord"],["id","no-tracker-info"],["nz-icon","","nzType","info-circle","nzTheme","outline"],["nzText","Available snapshots","nzOrientation","left"],[3,"file","activeSnapshot","snapshotSelected"]],template:function(t,e){1&t&&J.Kc(0,Ae,25,20,"ng-container",0),2&t&&J.sc("ngIf",e.file)},directives:[i.t,Q.a,Q.b,ee.a,ne.c,ne.j,ne.h,ne.e,ne.d,ie.a,ce.a,re.a,tt.a,me,ct.a,rt.a,De],pipes:[Fe.a,ot.a],styles:["#title[_ngcontent-%COMP%]{overflow-wrap:break-word;width:370px}#icon[_ngcontent-%COMP%], #title[_ngcontent-%COMP%]{display:inline-block}#icon[_ngcontent-%COMP%]{padding-left:10px;height:24px;width:50px;-webkit-transform:translateY(-2px);transform:translateY(-2px)}#icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:32px}#stats[_ngcontent-%COMP%]{position:relative;width:410px;top:0;bottom:0;margin:0 auto}#no-tracker-info[_ngcontent-%COMP%]{font-size:9pt;font-style:italic}"],changeDetection:0}),t}(),Ne=function(){function t(){}return t.prototype.transform=function(t){return t?t.map((function(t){return t.size})).reduce((function(t,e){return t+e})):0},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=J.Sb({name:"totalSize",type:t,pure:!0}),t}();function Re(t,e){if(1&t){var n=J.ac();J.Zb(0,"div",6),J.hc("click",(function(t){return J.Bc(n),J.kc(2).expand.next()})),J.Yb()}}function He(t,e){if(1&t){var n=J.ac();J.Zb(0,"div",4),J.Zb(1,"st-single-file-details",10),J.hc("snapshotSelected",(function(t){return J.Bc(n),J.kc(3).snapshotSelected.next(t)})),J.Yb(),J.Yb()}if(2&t){var i=J.kc(3);J.Cb(1),J.sc("file",i.files[0])("activeSnapshot",i.activeSnapshot)("settings",i.settings)("expanded",i.browserState.expanded_details)("tracker",i.trackers[i.files[0].path])("recordLabels",i.recordLabels)("diff",i.diffs[i.files[0].path])}}function Ve(t,e){if(1&t&&(J.Zb(0,"span"),J.Mc(1),J.Ub(2,"br"),J.Yb()),2&t){var n=e.$implicit;J.Cb(1),J.Nc(n.name)}}function We(t,e){if(1&t){var n=J.ac();J.Zb(0,"div",12),J.Zb(1,"h3"),J.Mc(2),J.lc(3,"fileSize"),J.lc(4,"totalSize"),J.Yb(),J.Zb(5,"button",13),J.hc("click",(function(t){return J.Bc(n),J.kc(4).persistPaths()})),J.Ub(6,"i",14),J.Mc(7," Record all"),J.Yb(),J.Ub(8,"br"),J.Ub(9,"br"),J.Kc(10,Ve,3,1,"span",15),J.Yb()}if(2&t){var i=J.kc(4);J.Cb(2),J.Pc("Selected ",i.files.length," files, total ",J.mc(3,3,J.mc(4,5,i.files)),""),J.Cb(8),J.sc("ngForOf",i.files)}}function Ge(t,e){if(1&t&&J.Kc(0,We,11,7,"div",11),2&t){var n=J.kc(3);J.sc("ngIf",n.files.length>1)}}function qe(t,e){1&t&&J.Ub(0,"nz-empty",16),2&t&&J.sc("nzNotFoundContent","No item selected")}function Je(t,e){if(1&t&&(J.Xb(0),J.Kc(1,He,2,7,"div",7),J.Kc(2,Ge,1,1,"ng-template",null,8,J.Lc),J.Kc(4,qe,1,1,"nz-empty",9),J.Wb()),2&t){var n=J.Ac(3),i=J.kc(2);J.Cb(1),J.sc("ngIf",1===i.files.length&&!!i.files[0])("ngIfElse",n),J.Cb(3),J.sc("ngIf",0===i.files.length)}}function Qe(t,e){if(1&t&&(J.Zb(0,"div",1),J.Kc(1,Re,1,0,"div",2),J.Ub(2,"div",3),J.Zb(3,"div",4),J.Kc(4,Je,5,3,"ng-container",5),J.Yb(),J.Yb()),2&t){var n=J.kc();J.Cb(1),J.sc("ngIf",!n.browserState.expanded_details),J.Cb(3),J.sc("ngIf",n.files)}}var Xe=function(){function t(t){this.modalService=t,this.trackers={},this.recordLabels={},this.diffs={},this.expand=new J.n,this.persist=new J.n,this.snapshotSelected=new J.n}return t.prototype.ngOnInit=function(){},t.prototype.persistPaths=function(){var t=this;this.modalService.confirmPersistSelection((function(){return t.files.forEach((function(e){return t.persist.next({path:e.path})}))}))},t.\u0275fac=function(e){return new(e||t)(J.Tb(jt.a))},t.\u0275cmp=J.Nb({type:t,selectors:[["st-details"]],inputs:{settings:"settings",files:"files",trackers:"trackers",browserState:"browserState",recordLabels:"recordLabels",activeSnapshot:"activeSnapshot",diffs:"diffs"},outputs:{expand:"expand",persist:"persist",snapshotSelected:"snapshotSelected"},decls:1,vars:1,consts:[["id","container",4,"ngIf"],["id","container"],["id","expansion-mask",3,"click",4,"ngIf"],["id","handle"],["id","details"],[4,"ngIf"],["id","expansion-mask",3,"click"],["id","details",4,"ngIf","ngIfElse"],["multiSelection",""],[3,"nzNotFoundContent",4,"ngIf"],[3,"file","activeSnapshot","settings","expanded","tracker","recordLabels","diff","snapshotSelected"],["id","selection-list",4,"ngIf"],["id","selection-list"],["nz-button","","nzType","primary","nzShape","round","nz-tooltip","","nzTooltipTitle","Record all current versions of files in selection scope",3,"click"],["nz-icon","","nzType","save","nzTheme","outline"],[4,"ngFor","ngForOf"],[3,"nzNotFoundContent"]],template:function(t,e){1&t&&J.Kc(0,Qe,5,2,"div",0),2&t&&J.sc("ngIf",e.browserState)},directives:[i.t,Ke,xt.a,_t.a,rt.a,et.d,ct.a,i.s,kt.b],pipes:[ot.a,Ne],styles:["nz-empty[_ngcontent-%COMP%]{margin:30pt auto}#handle[_ngcontent-%COMP%]{position:absolute;width:0;height:100%;left:0}#container[_ngcontent-%COMP%]{border-left:1px solid #e6e6e6}#container[_ngcontent-%COMP%], #details[_ngcontent-%COMP%]{position:absolute;width:410px;height:100%;left:0}#details[_ngcontent-%COMP%]{top:0}#expansion-mask[_ngcontent-%COMP%]{position:absolute;z-index:2;width:410px;height:100%;cursor:pointer;opacity:0}st-single-file-details[_ngcontent-%COMP%]{overflow-y:scroll;position:absolute}#selection-list[_ngcontent-%COMP%], st-single-file-details[_ngcontent-%COMP%]{overflow-x:hidden;height:100%;width:424px}#selection-list[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;text-overflow:ellipsis}"],changeDetection:0}),t}(),tn=n("W9u+"),en=function(){function t(t){this.store=t,this.trash=new J.n,this.createNewFolder=new J.n,this.copy=new J.n,this.cut=new J.n,this.paste=new J.n,this.rename=new J.n}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)(J.Tb(o.b))},t.\u0275cmp=J.Nb({type:t,selectors:[["st-file-management-utils"]],inputs:{pathsToPaste:"pathsToPaste",selection:"selection"},outputs:{trash:"trash",createNewFolder:"createNewFolder",copy:"copy",cut:"cut",paste:"paste",rename:"rename"},decls:21,vars:13,consts:[[3,"nzSize"],["title","Create folder",3,"form","click"],["nz-icon","","nzType","folder-add","nzTheme","outline"],["title","Rename",3,"form","disabled","click"],["nz-icon","","nzType","edit","nzTheme","outline"],[3,"nzType"],["title","Copy",3,"form","disabled","click"],["nz-icon","","nzType","copy","nzTheme","outline"],["title","Cut",3,"form","disabled","click"],["nz-icon","","nzType","scissor","nzTheme","outline"],["title","Paste",3,"form","disabled","click"],["nz-icon","","nzType","snippets","nzTheme","outline"],["title","Send to trash",3,"form","disabled","click"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(t,e){1&t&&(J.Zb(0,"nz-space",0),J.Zb(1,"nz-space-item"),J.Zb(2,"st-toolbar-button",1),J.hc("click",(function(t){return e.createNewFolder.next()})),J.Ub(3,"i",2),J.Yb(),J.Yb(),J.Zb(4,"nz-space-item"),J.Zb(5,"st-toolbar-button",3),J.hc("click",(function(t){return e.rename.next()})),J.Ub(6,"i",4),J.Yb(),J.Yb(),J.Zb(7,"nz-space-item"),J.Ub(8,"nz-divider",5),J.Yb(),J.Zb(9,"nz-space-item"),J.Zb(10,"st-toolbar-button",6),J.hc("click",(function(t){return e.copy.next()})),J.Ub(11,"i",7),J.Yb(),J.Yb(),J.Zb(12,"nz-space-item"),J.Zb(13,"st-toolbar-button",8),J.hc("click",(function(t){return e.cut.next()})),J.Ub(14,"i",9),J.Yb(),J.Yb(),J.Zb(15,"nz-space-item"),J.Zb(16,"st-toolbar-button",10),J.hc("click",(function(t){return e.paste.next()})),J.Ub(17,"i",11),J.Yb(),J.Yb(),J.Zb(18,"nz-space-item"),J.Zb(19,"st-toolbar-button",12),J.hc("click",(function(t){return e.trash.next()})),J.Ub(20,"i",13),J.Yb(),J.Yb(),J.Yb()),2&t&&(J.sc("nzSize",1),J.Cb(2),J.sc("form","square"),J.Cb(3),J.sc("form","square")("disabled",1!==(null==e.selection?null:e.selection.length)),J.Cb(3),J.sc("nzType","vertical"),J.Cb(2),J.sc("form","square")("disabled",!(null!=e.selection&&e.selection.length)),J.Cb(3),J.sc("form","square")("disabled",!(null!=e.selection&&e.selection.length)),J.Cb(3),J.sc("form","square")("disabled",!(null!=e.pathsToPaste&&e.pathsToPaste.length)),J.Cb(3),J.sc("form","square")("disabled",!(null!=e.selection&&e.selection.length)))},directives:[Q.a,Q.b,tn.a,ct.a,rt.a,tt.a],styles:["i[_ngcontent-%COMP%]{font-size:11.5pt;opacity:.9}"],changeDetection:0}),t}(),nn=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=J.Nb({type:t,selectors:[["st-binary-node-utils"]],decls:0,vars:0,template:function(t,e){},styles:[""],changeDetection:0}),t}(),cn=n("2b98"),rn=n("ncJJ"),on=n("a1lU");function an(t,e){if(1&t&&(J.Ub(0,"nz-option",6),J.lc(1,"snapshotOptionLabel")),2&t){var n=e.$implicit;J.sc("nzLabel",J.mc(1,2,n))("nzValue",n.id)}}function sn(t,e){if(1&t){var n=J.ac();J.Ub(0,"nz-divider"),J.Zb(1,"div",7),J.Zb(2,"span",8),J.Mc(3,"Difference view mode: "),J.Yb(),J.Zb(4,"nz-switch",9),J.hc("ngModelChange",(function(t){return J.Bc(n),J.kc().changeViewMode()})),J.Yb(),J.Yb()}if(2&t){var i=J.kc();J.Cb(2),J.Jc("margin-left","15px")("margin-right","8px"),J.Cb(2),J.sc("ngModel",i.snapshotViewMode)("nzSize","small")("nzLoading",i._isLoading)("nzDisabled",!i._active)}}var ln=function(){return[]},un=function(){function t(t,e){this.cdr=t,this.modalService=e,this.snapshotViewMode=l.Full,this.snapshotSelected=new J.n,this.toggleSnapshotViewMode=new J.n,this._isLoading=!1}return Object.defineProperty(t.prototype,"activeSnapshot",{set:function(t){var e=this;this._active=t,setTimeout((function(){return e.cdr.detectChanges()}),100)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"diffIsLoading",{set:function(t){var e=this;this._isLoading=t,setTimeout((function(){return e.cdr.markForCheck()}),100)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.selectSnapshot=function(t){this.snapshotSelected.next(t)},t.prototype.changeViewMode=function(){this.toggleSnapshotViewMode.next(Math.abs(this.snapshotViewMode-1))},t.prototype.snapshotDir=function(){var t,e=(null===(t=this.folder)||void 0===t?void 0:t.isDirectory)?this.folder.path:this.tab.location.present;this.modalService.confirmFolderSnapshot(e)},t.\u0275fac=function(e){return new(e||t)(J.Tb(J.h),J.Tb(cn.a))},t.\u0275cmp=J.Nb({type:t,selectors:[["st-snapshot-node-utils"]],inputs:{folder:"folder",tab:"tab",activeSnapshot:"activeSnapshot",snapshotViewMode:"snapshotViewMode",diffIsLoading:"diffIsLoading"},outputs:{snapshotSelected:"snapshotSelected",toggleSnapshotViewMode:"toggleSnapshotViewMode"},decls:10,vars:8,consts:[["id","snapshot_controls"],["title","Create snapshot of directory",1,"toolbar-btn",3,"form","click"],["nz-icon","","nzType","camera","nzTheme","outline"],["id","snapshot_select","nzAllowClear","",3,"ngModel","nzPlaceHolder","nzSize","disabled","nzDropdownRender","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["renderTemplate",""],[3,"nzLabel","nzValue"],["id","switch"],["nz-typography","","nzType","secondary"],["nzCheckedChildren","full","nzUnCheckedChildren","incr",3,"ngModel","nzSize","nzLoading","nzDisabled","ngModelChange"]],template:function(t,e){if(1&t&&(J.Zb(0,"div",0),J.Zb(1,"nz-space"),J.Zb(2,"nz-space-item"),J.Zb(3,"st-toolbar-button",1),J.hc("click",(function(t){return e.snapshotDir()})),J.Ub(4,"i",2),J.Yb(),J.Yb(),J.Zb(5,"nz-space-item"),J.Zb(6,"nz-select",3),J.hc("ngModelChange",(function(t){return e.selectSnapshot(t)})),J.Kc(7,an,2,4,"nz-option",4),J.Yb(),J.Yb(),J.Yb(),J.Yb(),J.Kc(8,sn,5,8,"ng-template",null,5,J.Lc)),2&t){var n=J.Ac(9);J.Cb(3),J.sc("form","square"),J.Cb(3),J.sc("ngModel",null==e._active?null:e._active.selectedId)("nzPlaceHolder","Select a snapshot ("+((null==e._active?null:e._active.snapshotsList.length)||0)+" available)")("nzSize","small")("disabled",!e._active)("nzDropdownRender",n),J.Cb(1),J.sc("ngForOf",(null==e._active?null:e._active.snapshotsList)||J.vc(7,ln))}},directives:[Q.a,Q.b,tn.a,ct.a,rt.a,Se.e,Ce.m,Ce.p,i.s,Se.a,tt.a,rn.c,on.a],pipes:[$e],styles:["#snapshot_select[_ngcontent-%COMP%]{width:324px}#snapshot_view_mode_select[_ngcontent-%COMP%]{width:120px}#snapshot_controls[_ngcontent-%COMP%]{margin-left:50px;border-radius:3px;box-sizing:border-box;height:39px;line-height:39px;padding:0 5px}#switch[_ngcontent-%COMP%]{padding-bottom:10px}i[_ngcontent-%COMP%]{font-size:11.5pt;opacity:.9}"],changeDetection:0}),t}(),pn=function(){function t(){this.selection=[],this.snapshotSelected=new J.n,this.toggleSnapshotViewMode=new J.n,this.trash=new J.n,this.createNewFolder=new J.n,this.copy=new J.n,this.cut=new J.n,this.paste=new J.n,this.rename=new J.n}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=J.Nb({type:t,selectors:[["st-browser-header-content"]],inputs:{tab:"tab",selection:"selection",activeSnapshot:"activeSnapshot",singleFile:"singleFile",snapshotViewMode:"snapshotViewMode",diffIsLoading:"diffIsLoading",pathsToPaste:"pathsToPaste"},outputs:{snapshotSelected:"snapshotSelected",toggleSnapshotViewMode:"toggleSnapshotViewMode",trash:"trash",createNewFolder:"createNewFolder",copy:"copy",cut:"cut",paste:"paste",rename:"rename"},decls:7,vars:8,consts:[[3,"nzSize"],[3,"pathsToPaste","selection","trash","createNewFolder","cut","copy","paste","rename"],[3,"folder","tab","activeSnapshot","snapshotViewMode","diffIsLoading","snapshotSelected","toggleSnapshotViewMode"]],template:function(t,e){1&t&&(J.Zb(0,"nz-space",0),J.Zb(1,"nz-space-item"),J.Zb(2,"st-file-management-utils",1),J.hc("trash",(function(t){return e.trash.next(t)}))("createNewFolder",(function(t){return e.createNewFolder.next(t)}))("cut",(function(t){return e.cut.next(t)}))("copy",(function(t){return e.copy.next(t)}))("paste",(function(t){return e.paste.next(t)}))("rename",(function(t){return e.rename.next(t)})),J.Yb(),J.Yb(),J.Zb(3,"nz-space-item"),J.Ub(4,"st-binary-node-utils"),J.Yb(),J.Zb(5,"nz-space-item"),J.Zb(6,"st-snapshot-node-utils",2),J.hc("snapshotSelected",(function(t){return e.snapshotSelected.next(t)}))("toggleSnapshotViewMode",(function(t){return e.toggleSnapshotViewMode.next(t)})),J.Yb(),J.Yb(),J.Yb()),2&t&&(J.sc("nzSize",5),J.Cb(2),J.sc("pathsToPaste",e.pathsToPaste)("selection",e.selection),J.Cb(4),J.sc("folder",null!=e.selection[0]&&e.selection[0].isDirectory?e.selection[0]:null)("tab",e.tab)("activeSnapshot",e.activeSnapshot)("snapshotViewMode",e.snapshotViewMode)("diffIsLoading",e.diffIsLoading))},directives:[Q.a,Q.b,en,nn,un],styles:["[_nghost-%COMP%]{font-size:13px}"],changeDetection:0}),t}(),bn=function(){return(bn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c]);return t}).apply(this,arguments)},dn=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,c,r=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return o},fn=["headerContent"];function hn(t,e){if(1&t){var n=J.ac();J.Zb(0,"st-browser-header-content",5),J.hc("toggleSnapshotViewMode",(function(t){return J.Bc(n),J.kc(2).toggleSnapshotViewMode(t)}))("snapshotSelected",(function(t){return J.Bc(n),J.kc(2).selectSnapshot(t)}))("trash",(function(t){return J.Bc(n),J.kc(2).trash()}))("cut",(function(t){return J.Bc(n),J.kc(2).cut()}))("copy",(function(t){return J.Bc(n),J.kc(2).copy()}))("paste",(function(t){return J.Bc(n),J.kc(2).paste()}))("rename",(function(t){return J.Bc(n),J.kc(2).rename()}))("createNewFolder",(function(t){return J.Bc(n),J.kc(2).createNewFolder()})),J.lc(1,"async"),J.lc(2,"async"),J.lc(3,"async"),J.lc(4,"async"),J.Yb()}if(2&t){var i,c=J.kc(2),r=null==(i=J.mc(4,13,c.pathsToPaste$))?null:i.paths;J.sc("selection",c.selection)("tab",J.mc(1,7,c.activeTab$))("singleFile",c.selection[0])("activeSnapshot",c.activeSnapshot)("snapshotViewMode",J.mc(2,9,c.snapshotViewMode$))("diffIsLoading",J.mc(3,11,c.diffIsLoading$))("pathsToPaste",r)}}var gn=function(t,e){return{"tree-width-expanded-details":t,"tree-width-retracted-details":e}},vn=function(t,e){return{"details-right-expanded":t,"details-right-retracted":e}};function mn(t,e){if(1&t){var n=J.ac();J.Xb(0),J.Zb(1,"st-bookmarks",1),J.hc("bookmarksPanelExpandChange",(function(t){return J.Bc(n),J.kc().panelExpandChange(t)}))("goToPath",(function(t){return J.Bc(n),J.kc().goToDir(t)})),J.lc(2,"async"),J.Yb(),J.Zb(3,"st-tree-browser",2),J.hc("onSelect",(function(t){return J.Bc(n),J.kc().select(t)}))("open",(function(t){return J.Bc(n),J.kc().open(t)}))("onSort",(function(t){return J.Bc(n),J.kc().sort(t)}))("goBack",(function(t){return J.Bc(n),J.kc().goBack(t)}))("goForward",(function(t){return J.Bc(n),J.kc().goForward(t)}))("goUp",(function(t){return J.Bc(n),J.kc().goUp()}))("goHome",(function(t){return J.Bc(n),J.kc().goHome()}))("reload",(function(t){return J.Bc(n),J.kc().reload()}))("goToPath",(function(t){return J.Bc(n),J.kc().goToDir(t)}))("closeTab",(function(t){return J.Bc(n),J.kc().closeTab(t)}))("newTab",(function(t){return J.Bc(n),J.kc().newTab()}))("tabChange",(function(t){return J.Bc(n),J.kc().tabChange(t)}))("detailsExpandChange",(function(t){return J.Bc(n),J.kc().panelExpandChange([null,"details"])})),J.lc(4,"async"),J.lc(5,"async"),J.lc(6,"async"),J.Yb(),J.Zb(7,"st-details",3),J.hc("expand",(function(t){return J.Bc(n),J.kc().panelExpandChange([null,"details"])}))("persist",(function(t){return J.Bc(n),J.kc().persist(t)}))("snapshotSelected",(function(t){return J.Bc(n),J.kc().selectSnapshot(t)})),J.lc(8,"async"),J.Yb(),J.Kc(9,hn,5,15,"ng-template",null,4,J.Lc),J.Wb()}if(2&t){var i=e.ngIf,c=J.kc();J.Cb(1),J.sc("browserState",i)("currentLocation",J.mc(2,22,c.currentLocation$)),J.Cb(2),J.sc("ngClass",J.xc(32,gn,i.expanded_details,!i.expanded_details))("files",c.files)("selection",c.selection)("browserState",i)("activeTab",J.mc(4,24,c.activeTab$))("trackers",c.trackers)("filterText",J.mc(5,26,c.filterText$))("icons",J.mc(6,28,c.icons$))("dirsWithActiveFiles",c.dirsWithActiveFiles)("snapshots",c.snapshots)("diffs",c.diffs)("activeSnapshot",c.activeSnapshot),J.Cb(4),J.sc("ngClass",J.xc(35,vn,i.expanded_details,!i.expanded_details))("activeSnapshot",c.activeSnapshot)("files",c.selection)("settings",J.mc(8,30,c.settings$))("trackers",c.trackers)("browserState",i)("recordLabels",c.nodesRecordLabels)("diffs",c.diffs)}}var On=[{path:"",component:function(){function t(t,e,n,i,c){var r=this;this.persistService=t,this.store$=e,this.electronService=n,this.cdr=i,this.header=c,this.subscription=new V.a,this.browserState$=this.store$.select(T),this.activeTab$=this.store$.select(M),this.currentLocation$=this.store$.select(B),this.settings$=this.store$.select(y.a),this.icons$=this.store$.select(y.c),this.filterText$=this.store$.select(k.a),this.snapshotViewMode$=this.store$.select(Z),this.diffIsLoading$=this.store$.select(L),this.trackers={},this.snapshots={},this.diffs={},this.dirsWithActiveFiles={},this.nodesRecordLabels={},this.pathsToPaste$=this.store$.select(w.selectPathsToPaste),this.newTab=function(){r.store$.dispatch(Object(u.f)())},this.persistService.registerForFeature(T,{key:"tabs",trimFn:function(t){return t.map((function(t){return bn(bn({},t),{paths:null,location:{past:[],present:t.location.present,future:[]}})}))}},"selected_tab","expanded_details","expanded_bookmarks","expanded_devices","expanded_places","bookmarks","sorting")}return t.prototype.ngOnInit=function(){var t=this;this.store$.dispatch(Object(G.a)("Filter file list...")),this.subscription.add(this.store$.select(R).subscribe((function(e){t.files=e,t.cdr.detectChanges()}))).add(this.store$.select(N).subscribe((function(e){t.selection=e,t.cdr.detectChanges()}))).add(this.store$.select(w.selectFileTrackers).subscribe((function(e){t.trackers=e,t.cdr.detectChanges()}))).add(this.store$.select(D).subscribe((function(e){t.dirsWithActiveFiles=e,t.cdr.detectChanges()}))).add(this.store$.select(w.selectRecordLabels).subscribe((function(e){t.nodesRecordLabels=e,t.cdr.detectChanges()}))).add(this.store$.select(w.selectAvailableSnapshots).subscribe((function(e){t.snapshots=e,t.cdr.detectChanges()}))).add(this.store$.select(E).subscribe((function(e){t.activeSnapshot=e,t.cdr.detectChanges()}))).add(this.store$.select(H).subscribe((function(e){t.diffs=e,t.cdr.detectChanges()})))},t.prototype.ngAfterViewInit=function(){this.header.setContent(this.headerContent)},t.prototype.panelExpandChange=function(t){var e=dn(t,2)[1];this.store$.dispatch(Object(u.j)(e))},t.prototype.goToDir=function(t){this.store$.dispatch(Object(u.A)({location:t,track:!0,reload:!0,tab_name:this.electronService.path.basename(t)}))},t.prototype.goHome=function(){this.store$.dispatch(Object(u.u)())},t.prototype.reload=function(){this.store$.dispatch(Object(u.B)())},t.prototype.goBack=function(t){this.store$.dispatch(Object(u.s)(t))},t.prototype.goForward=function(t){this.store$.dispatch(Object(u.t)(t))},t.prototype.goUp=function(){this.store$.dispatch(Object(u.w)())},t.prototype.select=function(t){var e=dn(t,2),n=e[0],i=e[1];this.store$.dispatch(Object(u.D)({index:i,ctrlKey:!!n&&(n.metaKey||n.ctrlKey),shiftKey:!!n&&n.shiftKey}))},t.prototype.open=function(t){this.store$.dispatch(Object(u.y)(t))},t.prototype.closeTab=function(t){this.store$.dispatch(Object(u.c)(t))},t.prototype.tabChange=function(t){var e=t.index;this.store$.dispatch(Object(u.K)(e))},t.prototype.sort=function(t){this.store$.dispatch(Object(u.J)(t))},t.prototype.persist=function(t){this.store$.dispatch(Object(W.K)(t.path,t.annotation))},t.prototype.selectSnapshot=function(t){this.store$.dispatch(Object(u.E)(t))},t.prototype.toggleSnapshotViewMode=function(t){this.store$.dispatch(Object(u.M)(t))},t.prototype.trash=function(){this.store$.dispatch(Object(u.h)())},t.prototype.cut=function(){this.store$.dispatch(Object(u.g)())},t.prototype.copy=function(){this.store$.dispatch(Object(u.d)())},t.prototype.paste=function(){this.store$.dispatch(Object(u.z)())},t.prototype.pasteInto=function(t){t.isDirectory&&this.store$.dispatch(Object(u.z)(t.path))},t.prototype.rename=function(){this.store$.dispatch(Object(u.C)())},t.prototype.createNewFolder=function(){this.store$.dispatch(Object(u.e)())},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(J.Tb(r.f),J.Tb(o.b),J.Tb(r.c),J.Tb(J.h),J.Tb(q.a))},t.\u0275cmp=J.Nb({type:t,selectors:[["st-browser"]],viewQuery:function(t,e){var n;1&t&&J.Rc(fn,!0),2&t&&J.zc(n=J.ic())&&(e.headerContent=n.first)},decls:2,vars:3,consts:[[4,"ngIf"],[3,"browserState","currentLocation","bookmarksPanelExpandChange","goToPath"],[3,"ngClass","files","selection","browserState","activeTab","trackers","filterText","icons","dirsWithActiveFiles","snapshots","diffs","activeSnapshot","onSelect","open","onSort","goBack","goForward","goUp","goHome","reload","goToPath","closeTab","newTab","tabChange","detailsExpandChange"],[3,"ngClass","activeSnapshot","files","settings","trackers","browserState","recordLabels","diffs","expand","persist","snapshotSelected"],["headerContent",""],[3,"selection","tab","singleFile","activeSnapshot","snapshotViewMode","diffIsLoading","pathsToPaste","toggleSnapshotViewMode","snapshotSelected","trash","cut","copy","paste","rename","createNewFolder"]],template:function(t,e){1&t&&(J.Kc(0,mn,11,38,"ng-container",0),J.lc(1,"async")),2&t&&J.sc("ngIf",J.mc(1,1,e.browserState$))},directives:[i.t,mt,te,i.q,Xe,pn],pipes:[i.b],styles:["[_nghost-%COMP%]{overflow:hidden}st-bookmarks[_ngcontent-%COMP%]{width:220px}st-details[_ngcontent-%COMP%]{position:absolute;width:424px;height:100%;top:0;right:0;-webkit-transition:right .1s;transition:right .1s}st-tree-browser[_ngcontent-%COMP%]{-webkit-transition:width .1s;transition:width .1s}.tree-width-expanded-details[_ngcontent-%COMP%]{width:calc(100% - 644px)}.tree-width-retracted-details[_ngcontent-%COMP%]{width:calc(100% - 240px)}.details-right-expanded[_ngcontent-%COMP%]{right:0}.details-right-retracted[_ngcontent-%COMP%]{right:-404px}"]}),t}()}],jn=function(){function t(){}return t.\u0275mod=J.Rb({type:t}),t.\u0275inj=J.Qb({factory:function(e){return new(e||t)},imports:[[i.c,c.j.forChild(On)],c.j]}),t}(),yn=n("PCNd"),wn=n("xMyE"),kn=n("Phjn"),xn=n("/PH2"),zn=n("15JJ"),Sn=n("67Y/"),_n=n("psW0"),Cn=n("VnD/"),Tn=n("t9fZ"),$n=n("ad02"),Pn=n("K9Ia"),Mn=n("F/XL"),In=n("0/uQ"),Dn=n("p0ib"),Fn=n("mEZQ"),Yn=n("6blF"),Zn=n("mrSG"),Ln=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return Zn.c(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),V.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),V.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(Pn.a),Bn=n("1fDf"),Un=n("isby"),En=n("nkY7");function An(t,e,n){if(e){if(!Object(En.a)(e))return function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return An(t,n).apply(void 0,i).pipe(Object(Sn.a)((function(t){return Object(Un.a)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var c,r=this,o={context:r,subject:c,callbackFunc:t,scheduler:n};return new Yn.a((function(i){if(n)return n.schedule(Kn,0,{args:e,subscriber:i,params:o});if(!c){c=new Ln;try{t.apply(r,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c.next(t.length<=1?t[0]:t),c.complete()}]))}catch(a){Object(Bn.a)(c)?c.error(a):console.warn(a)}}return c.subscribe(i)}))}}function Kn(t){var e=this,n=t.args,i=t.subscriber,c=t.params,r=c.callbackFunc,o=c.context,a=c.scheduler,s=c.subject;if(!s){s=c.subject=new Ln;try{r.apply(o,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t.length<=1?t[0]:t;e.add(a.schedule(Nn,0,{value:i,subject:s}))}]))}catch(l){s.error(l)}}this.add(s.subscribe(i))}function Nn(t){var e=t.subject;e.next(t.value),e.complete()}var Rn=n("y3By"),Hn=n("QHKX"),Vn=n("rTk+"),Wn=n("mw/K"),Gn=n("q5lg"),qn=n("pIxY"),Jn=n("V52D"),Qn=function(t,e,n,i){return new(n||(n=Promise))((function(c,r){function o(t){try{s(i.next(t))}catch(e){r(e)}}function a(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?c(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}s((i=i.apply(t,e||[])).next())}))},Xn=function(t,e){var n,i,c,r,o={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(c=2&r[0]?i.return:r[0]?i.throw||((c=i.return)&&c.call(i),0):i.next)&&!(c=c.call(i,r[1])).done)return c;switch(i=0,c&&(r=[2&r[0],c.value]),r[0]){case 0:case 1:c=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(c=(c=o.trys).length>0&&c[c.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!c||r[1]>c[0]&&r[1]<c[3])){o.label=r[1];break}if(6===r[0]&&o.label<c[1]){o.label=c[1],c=r;break}if(c&&o.label<c[2]){o.label=c[2],o.ops.push(r);break}c[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(a){r=[6,a],i=0}finally{n=c=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},ti=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,c,r=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return o},ei=function(){function t(t,e,n,i,c,r,o,s,p){var b=this;this.action$=t,this.store$=e,this.electronService=n,this.messageService=i,this.engine=c,this.fsUtils=r,this.graphUtils=o,this.fileModals=s,this.modals=p,this.watcherEventsStream=new Pn.a,this.readDir$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.A),Object(wn.a)((function(){return b._signalStatus(a.Pending)()})),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(M)))})),Object(zn.a)((function(t){var e=ti(t,2),n=e[0],i=n.location,c=n.reload,r=n.track,o=n.tab_name,s=n.correlationId;return"string"!=typeof i?ye.a:(i===e[1].location.present&&(r=!1),b._readDir(i).pipe(Object(Sn.a)((function(t){t.length||b._signalStatus(a.Success)();var e=b.electronService.isRoot(i),n=t.map((function(t){return b.electronService.path.join(i,t)}));return c&&b.store$.dispatch(Object(W.u)({paths:n,finishCb:b._signalStatus(a.Success),errorCb:b._signalStatus(a.Error)})),Object(u.i)({names:t,location:i,paths:n,track:r,isRoot:e,tab_name:o,correlationId:s})})),Object(we.a)((function(t){return b.messageService.error("Path '"+i+"' invalid",{nzPauseOnHover:!0}),b._signalStatus(a.Error)(),Object(Mn.a)(Object(u.i)({names:null,location:i,paths:null,track:!1,isRoot:!1,tab_name:null,correlationId:s}))}))))})))})),this.getActivatedChildren$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.i,u.x),Object(zn.a)((function(t){return Object(Mn.a)(t).pipe(Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(w.selectStCore)))})),Object(_n.a)((function(t){var e=ti(t,2),n=e[0],i=n.paths,c=n.location,r=e[1].watchers;return Object(In.a)(b._pathsToDirs(i)).pipe(Object(Sn.a)((function(t){return Object.entries(t).filter((function(t){return ti(t,2)[1]})).map((function(t){return ti(t,1)[0]}))})),Object(Oe.a)("dir paths"),Object(_n.a)((function(t){return Object(Dn.a)(Object(Mn.a)(t).pipe(Object(Cn.a)((function(){return!r[c]})),Object(Oe.a)("Requesting watcher, ignore dir paths"),Object(Sn.a)((function(t){return Object(W.ab)(c,b._handleWatcherEvents(c),{ignore:t})}))),Object(Mn.a)(t).pipe(Object(Oe.h)(),Object(_n.a)((function(t){return Object(In.a)(t).pipe(Object(Sn.a)((function(t){return Object(u.o)(t)})))}))))})))})))})),Object(we.a)((function(t){return ye.a})))})),this.goToPath$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.v),Object(_n.a)((function(t){var e=t.path,n=Object(W.F)(),i=b.electronService.path.dirname(e);return b.store$.dispatch(Object(u.f)(i,n)),b.action$.pipe(Object(Oe.c)(n,u.x),Object(_n.a)((function(t){return b.store$.select(R)})),Object(Sn.a)((function(t){return t.findIndex((function(t){return t.path===e}))})),Object(Cn.a)((function(t){return t>-1})),Object(Oe.a)("going to file"),Object(Sn.a)((function(t){return Object(u.D)({index:t,ctrlKey:!1,shiftKey:!1})})),Object(Tn.a)(1))})))})),this.history$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.t,u.s),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(M)))})),Object(kn.a)((function(t){var e=ti(t,2),n=e[0],i=n.index,c=n.type,r=e[1],o=c===u.a.GoBackward?r.location.past:r.location.future;if(i>=o.length)return ye.a;b._signalStatus(a.Pending)();var s=o[i];return b._readDir(s).pipe(Object(_n.a)((function(t){var e={names:t,paths:t.map((function(t){return b.electronService.path.join(s,t)})),steps:i+1,tab_name:b.electronService.path.basename(s),is_root:b.electronService.isRoot(s)};return c===u.a.GoBackward?Object(Mn.a)(Object(u.O)(e)):Object(Mn.a)(Object(u.P)(e))})),Object(wn.a)((function(){return b._signalStatus(a.Success)()})),Object(we.a)((function(t){return b.messageService.error("History location unreadable"),b._signalStatus(a.Error)(),ye.a})))})))})),this.goUp$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.w),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(M)))})),Object(kn.a)((function(t){var e=ti(t,2)[1];if(e.is_root||b.electronService.isRoot(e.location.present))return ye.a;var n=b.electronService.path.dirname(e.location.present);return Object(Mn.a)(Object(u.A)({location:n,reload:!0,tab_name:b.electronService.path.basename(n),track:!0}))})))})),this.goHome$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.u),Object(Sn.a)((function(){return Object(u.A)({location:Object(z.o)("home"),track:!0,reload:!0,tab_name:b.electronService.path.basename(Object(z.o)("home"))})})))})),this.reload$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.B),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(M)))})),Object(zn.a)((function(t){var e=ti(t,2)[1];return Object(Mn.a)(Object(u.A)({location:e.location.present,reload:!0,track:!1,tab_name:e.tab_name}))})))})),this.createNewTab$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.f),Object(wn.a)((function(){return b.store$.dispatch(Object(Hn.b)({cursor:"progress"}))})),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(M)))})),Object(kn.a)((function(t){var e,n=ti(t,2),i=n[0],c=i.path,r=i.correlationId,o=n[1];return c||(c=(null===(e=o)||void 0===e?void 0:e.location)?o.location.present:Object(z.o)("home")),b._readDir(c).pipe(Object(_n.a)((function(t){var e=b.electronService.isRoot(c),n=t.map((function(t){return b.electronService.path.join(c,t)}));return[Object(Hn.l)(n.length+" items in folder"),Object(W.u)({paths:n,finishCb:b._signalStatus(a.Success)}),Object(u.x)({is_root:e,location:{present:c,past:[],future:[]},names:t,paths:n,read_status:a.Pending,tab_name:b.electronService.path.basename(c)},r)]})))})))})),this.selectFiles$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.D),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(R)))})),Object(_n.a)((function(t){return Object(Mn.a)(t).pipe(Object(Ot.a)(t[0].throttle||200),Object(Sn.a)((function(t){var e=ti(t,2),n=e[0],i=n.index,c=n.shiftKey,r=n.ctrlKey,o=e[1];return Object(u.m)({index:i,shiftKey:c,ctrlKey:r,files:o})})))})))})),this.filesSelected$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.m),Object(Cn.a)((function(t){return!!t.files[t.index]&&!t.shiftKey})),Object(Sn.a)((function(t){return t.files[t.index]})),Object(Cn.a)((function(t){return!t.isDirectory&&!t.isSymbolicLink&&!t.mime})),Object(Sn.a)((function(t){return Object(W.q)([t.path])})))})),this.infoText$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.i,u.x),Object(Cn.a)((function(t){return Array.isArray(t.paths)})),Object(Sn.a)((function(t){var e=t.paths;return Object(Hn.l)(e.length+" items in folder")})))})),this.selectedDirToGraphData$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.m),Object(Oe.a)("select dir to graph data"),Object(Sn.a)((function(t){return t.files[t.index]})),Object(Cn.a)((function(t){var e;return null===(e=t)||void 0===e?void 0:e.isDirectory})),Object(Sn.a)((function(t){return t.path})),b._fetchGraphDataForDir())})),this.goHomeToGraphData$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.u),Object(Sn.a)((function(){return Object(z.o)("home")})),b._fetchGraphDataForDir())})),this.goUpToGraphData$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.w),Object(kn.a)((function(){return Object(Mn.a)(null).pipe(Object(xn.a)(b.store$.select(M)))})),Object(Sn.a)((function(t){var e=ti(t,2);return b.electronService.path.dirname(e[1].location.present)})),b._fetchGraphDataForDir())})),this.fallbackGetGraphData$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.A),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(M)))})),Object(Cn.a)((function(t){var e=ti(t,2),n=e[1].location;return e[0].reload||!n.past.length&&!n.future.length})),Object(Sn.a)((function(t){return ti(t,2)[1].location.present})),b._fetchGraphDataForDir())})),this.reloadToGraphData$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.B),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(M)))})),Object(Sn.a)((function(t){return ti(t,2)[1].location.present})),b._fetchGraphDataForDir(!0))})),this.seedGraphData$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.x),Object(Cn.a)((function(t){return Array.isArray(t.paths)})),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(U)))})),Object(Oe.a)("dir read"),Object(Cn.a)((function(t){var e=ti(t,2);return!e[1].has(e[0].location)})),Object(Oe.a)("get full nodes"),Object(Sn.a)((function(t){var e=ti(t,1)[0],n=e.paths,i=e.location;return Object(u.p)(i,n)})))})),this.getGraphData$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.p),Object(Oe.a)("requesting graph data"),Object(_n.a)((function(t){var e=t.paths,n=t.location;return Object(Dn.a)(b.graphUtils.getTrackers(e),b.graphUtils.getSnapshots(e.concat(n)))})))})),this.arrowKeyPress$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.b),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(T),b.store$.select(R)))})),Object(_n.a)((function(t){var e=ti(t,3),n=e[0].keyPress,i=e[1],c=e[2];if(!["ArrowUp","ArrowDown"].includes(n.key))return ye.a;if(i.selection.length>1)return ye.a;n.preventDefault();var r=null;return 1===i.selection.length&&(r=c.findIndex((function(t){return t.name===i.selection[0].name}))),"ArrowUp"===n.key&&0!==r?Object(Mn.a)(Object(u.D)({ctrlKey:!1,shiftKey:!1,index:null!==r?r-1:c.length-1,throttle:0})):"ArrowDown"===n.key&&r!==c.length-1?Object(Mn.a)(Object(u.D)({ctrlKey:!1,shiftKey:!1,index:null!==r?r+1:0,throttle:0})):ye.a})))})),this.watcherEvents$=Object(ze.c)((function(){return b.watcherEventsStream.pipe(Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(Z)))})),Object(_n.a)((function(t){var e=ti(t,2),n=e[0],i=e[1];return Object(In.a)(n).pipe(Object(kn.a)((function(t){return b.fsUtils.stat$(t.path).pipe(Object(we.a)((function(){return Object(Mn.a)(null)}))).pipe(Object(Oe.a)("noticed edit",t,z.d.ocean),Object(_n.a)((function(e){var n=t.path;switch(t.type){case"create":return[Object(u.k)(n,b.electronService.path.basename(n),b.electronService.path.dirname(n)),Object(W.u)({paths:[n]}),Object(W.B)(n),Object(u.q)(b.electronService.path.dirname(n),i)];case"update":return e.isDirectory()?ye.a:[Object(W.B)(n),Object(u.q)(b.electronService.path.dirname(n),i)];case"delete":return[Object(u.l)(n,b.electronService.path.basename(n),b.electronService.path.dirname(n)),Object(W.X)(n),Object(W.A)(n),Object(u.q)(b.electronService.path.dirname(n),i)]}})))})))})))})),this.dirSnapshotted$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(W.Bb),Object(Sn.a)((function(t){var e=t.path;return Object(u.o)(e)})))})),this.fileEvents$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(W.W),Object(_n.a)((function(t){var e=t.items,n=e.map((function(t){var e=ti(t,1)[0];return Object(u.o)(b.electronService.path.dirname(e))}));return n.push(Object(W.f)(e.map((function(t){return t[1]})),!0)),n})))})),this.getDirHasActiveBinaryNodes$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.o),Object(_n.a)((function(t){var e=t.dirPath;return b.engine.datastore.graph.select(Vn.a).get$((function(t){return t.findActivatedPathsFromDirPath(e)})).pipe(Object(Sn.a)((function(t){return Object(u.G)(e,t)})))})))})),this.reloadDescendantSnapshot$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.x),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(Y),b.store$.select(w.selectRecords)))})),Object(Cn.a)((function(t){return!!ti(t,2)[1]})),Object(_n.a)((function(t){var e=ti(t,3),n=e[0].location,i=e[1].ancestorId,c=e[2][Object(z.n)([{type:x.f.Collection},{id:i}])];return c?Object(Mn.a)(Object(u.n)(n,c)):ye.a})))})),this.descendantSnapshotFromSelection$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.m),Object(Sn.a)((function(t){return t.files[t.index]})),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(M),b.store$.select(Y),b.store$.select(w.selectRecords)))})),Object(Cn.a)((function(t){return!!ti(t,3)[2]})),Object(_n.a)((function(t){var e=ti(t,4),n=e[0],i=e[2].ancestorId,c=n.isDirectory?n.path:e[1].location.present,r=e[3][Object(z.n)([{type:x.f.Collection},{id:i}])];return r?Object(Mn.a)(Object(u.n)(c,r)):ye.a})))})),this.getDescendantSnapshot$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.n),Object(_n.a)((function(t){var e=t.path,n=t.ancestor;return b.engine.datastore.graph.select(Gn.a).get$((function(t){return t.getDescendantSnapshotByPathFromAncestor(e,n)})).pipe(Object(Oe.a)("setting relevant snapshot for path",e),Object(_n.a)((function(t){return[Object(u.F)(t?t[1].id:null),Object(W.f)(t?[t]:[])]})))})),Object(we.a)((function(t){return ye.a})))})),this.readDirToDiff$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.A),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(Y),b.store$.select(Z)))})),Object(Cn.a)((function(t){var e=ti(t,2),n=e[1];return!!n&&e[0].location.startsWith(n.rootPath)})),Object(Sn.a)((function(t){var e=ti(t,3),n=e[0].location,i=e[2];return Object(u.q)(n,i)})))})),this.viewModeToggleToDiff$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.M),Object($n.a)((function(t,e){return t.mode===e.mode})),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(M)))})),Object(Sn.a)((function(t){var e=ti(t,2),n=e[0].mode,i=e[1].location;return Object(u.q)(i.present,n)})))})),this.resetDiff$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.E),Object(Cn.a)((function(t){return null===t.id})),Object(Sn.a)((function(){return Object(u.H)(null)})))})),this.snapshotToDiff$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.E),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(M),b.store$.select(Z)))})),Object(Sn.a)((function(t){var e=ti(t,3),n=e[1].location,i=e[2];return Object(u.q)(n.present,i)})))})),this.getSnapshotDiff$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.q),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(Y),b.store$.select(w.selectRecords)))})),Object(Oe.a)("getting snapshot diff"),Object(zn.a)((function(t){var e=ti(t,3),n=e[0],i=e[1],c=e[2],r=n.path,o=n.mode,a=n.correlationId;if(!i)return Object(Mn.a)(Object(u.r)(n,"Cannot get diff without a current snapshot"));if(!r.startsWith(i.rootPath))return Object(Mn.a)(Object(u.r)(n,"Cannot get diff if not child path"));var s=c[Object(z.n)([{type:x.f.Collection},{id:i.ancestorId}])];return b.engine.datastore.graph.select(Gn.a).get$((function(t){return t.getDescendantSnapshotByPathFromAncestor(r,s)})).pipe(Object(_n.a)((function(t){switch(o){case l.Full:return b.engine.datastore.graph.select(Gn.a).get$((function(e){return e.getCurrentChanges(t[0],t[1])}));case l.Incremental:return b.engine.datastore.graph.select(Gn.a).get$((function(e){return e.getDifference(t[1])}))}})),Object(Sn.a)((function(t){return Object(u.H)(t,a)})),Object(we.a)((function(t){return Object(Mn.a)(Object(u.r)(n,t))})))})))})),this.setDiffNodes$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.H),Object(Cn.a)((function(t){return!!t.diff})),Object(_n.a)((function(t){var e=t.diff.reduce((function(t,e){return e.type===S.a.Lost?t.add.push(e.was):(e.was||e.is)&&t.set.push(e.was||e.is),t}),{set:[],add:[]}),n=e.set,i=e.add;return[Object(W.rb)(n),Object(W.f)(i)]})))})),this.setDiffIsLoading$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.q),Object(Cn.a)((function(t){return"number"==typeof t.correlationId})),Object(zn.a)((function(t){var e=t.correlationId;return b.store$.dispatch(Object(u.L)(!0)),b.action$.pipe(Object(Oe.c)(e,u.H,u.r),Object(Sn.a)((function(){return Object(u.L)(!1)})))})))})),this.delete$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.h),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(N)))})),Object(Oe.a)("going to delete files"),Object(kn.a)((function(t){var e,n=ti(t,2)[1];return(null===(e=n)||void 0===e?void 0:e.length)?Object(Fn.a)((function(){return 1===n.length}),An(b.fileModals.confirmTrashOne)(n[0].path),An(b.fileModals.confirmTrashMany)(n.map((function(t){return t.path})))).pipe(Object(Cn.a)((function(t){return t})),Object(_n.a)((function(){return Object(In.a)(n)})),Object(Sn.a)((function(t){return b.electronService.shell.moveItemToTrash(t.path)})),Object(Oe.a)("file deleted")):ye.a})),Object(we.a)((function(t){return ye.a})))}),{dispatch:!1}),this.cut$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.g),Object(kn.a)((function(){return Object(Mn.a)(null).pipe(Object(xn.a)(b.store$.select(I)))})),Object(Cn.a)((function(t){var e;return!!(null===(e=ti(t,2)[1])||void 0===e?void 0:e.length)})),Object(Sn.a)((function(t){var e=ti(t,2)[1];return b.messageService.warning(e.length+" files selected for cutting"),Object(W.ub)(e.map((function(t){return t.path})))})))})),this.copy$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.d),Object(kn.a)((function(){return Object(Mn.a)(null).pipe(Object(xn.a)(b.store$.select(I)))})),Object(Cn.a)((function(t){var e;return!!(null===(e=ti(t,2)[1])||void 0===e?void 0:e.length)})),Object(Sn.a)((function(t){var e=ti(t,2)[1];return b.messageService.info(e.length+" files selected for copying"),Object(W.tb)(e.map((function(t){return t.path})))})))})),this.paste$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.z),Object(kn.a)((function(){return Object(Mn.a)(null).pipe(Object(xn.a)(b.store$.select(B)))})),Object(Cn.a)((function(t){var e=ti(t,2);return!!e[0].targetDir||!!e[1]})),Object(Sn.a)((function(t){var e=ti(t,2),n=e[0].targetDir,i=e[1];return Object(W.H)(n||i)})))})),this.open$=Object(ze.c)((function(){return b.action$.pipe(Object(ze.d)(u.y),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(b.store$.select(H)))})),Object(_n.a)((function(t){var e,n,i=ti(t,2),c=i[0].item,r=i[1];return c.isSymbolicLink?(e=c.symLinkTarget,n=c.symLinkIsDirectory):(e=c.path,n=c.isDirectory),n?Object(Mn.a)(Object(u.A)({location:e,track:!0,reload:!0,tab_name:b.electronService.path.basename(e)})):r&&r[e]?(b.modals.confirmOpenDiffedFile(b.electronService.path.basename(e),(function(){return b.store$.dispatch(Object(W.h)({node:r[e].was||r[e].is,open:!0,filePermissions:292}))}),(function(){return b.store$.dispatch(Object(W.G)(e))})),ye.a):Object(Mn.a)(Object(W.G)(e))})))}))}return t.prototype._signalStatus=function(t){var e=this;return function(){e.store$.dispatch(Object(u.I)(t)),e.store$.dispatch(t===a.Pending?Object(Hn.b)({cursor:"progress"}):Object(Hn.b)({cursor:"default"}))}},t.prototype._readDir=function(t){var e,n;return Object(In.a)((null===(n=null===(e=this.electronService.fs)||void 0===e?void 0:e.promises)||void 0===n?void 0:n.readdir(t))||[])},t.prototype._pathsToDirs=function(t){return Qn(this,void 0,void 0,(function(){var e,n=this;return Xn(this,(function(i){switch(i.label){case 0:return e={},[4,Promise.all(t.map((function(t){return Qn(n,void 0,void 0,(function(){var n;return Xn(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Wn.promises.stat(t)];case 1:return n=i.sent(),e[t]=n.isDirectory(),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}}))}))})))];case 1:return i.sent(),[2,e]}}))}))},t.prototype._handleWatcherEvents=function(t){var e=this;return t=this.electronService.path.resolve(t),function(n,i){return Qn(e,void 0,void 0,(function(){var e=this;return Xn(this,(function(c){return n?[2]:(i&&i.length&&(i=i.filter((function(n){var i=n.path;return e.electronService.path.dirname(i)===t&&!e.electronService.path.basename(i).includes("~")})),this.watcherEventsStream.next(i)),[2])}))}))}},t.prototype._fetchGraphDataForDir=function(t){var e=this;return void 0===t&&(t=!1),Object(Rn.a)(Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(e.store$.select(U)))})),Object(Cn.a)((function(e){var n=ti(e,2);return t||!n[1].has(n[0])})),Object(_n.a)((function(t){var n=ti(t,1)[0];return Object(In.a)(e.fsUtils.scanDir(n,!1)).pipe(Object(Sn.a)((function(t){return Object(u.p)(n,t.map((function(t){return t.path})))})))})))},t.\u0275fac=function(e){return new(e||t)(J.dc(ze.a),J.dc(o.b),J.dc(r.c),J.dc(Jn.e),J.dc(jt.b),J.dc(jt.d),J.dc(jt.e),J.dc(qn.a),J.dc(jt.a))},t.\u0275prov=J.Pb({token:t,factory:t.\u0275fac}),t}(),ni=n("vubp"),ii=n("Cr8c"),ci=n("KD6q"),ri=n("909l"),oi=n("AytR"),ai=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,c,r=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){c={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return o},si=function(){function t(t,e,n,i,c,r,o,s){var l=this;this.action$=t,this.store$=e,this.electronService=n,this.documentEventsService=i,this.driveListService=c,this.engineService=r,this.utils=o,this.route=s,this.routeToPath$=Object(ze.c)((function(){return l.route.queryParamMap.pipe(Object(Sn.a)((function(t){return t.get("path")})),Object(Cn.a)((function(t){return!!t})),Object(_n.a)((function(t){return l.store$.select(M).pipe(Object(Cn.a)((function(t){var e;return(null===(e=t)||void 0===e?void 0:e.read_status)===a.Success})),Object(Tn.a)(1),Object(ni.a)(10),Object(Oe.a)("navigated to browser location",z.d.blush),Object(Sn.a)((function(){return Object(u.v)(t)})))})))})),this.createTab$=Object(ze.c)((function(){return l.store$.select(T).pipe(Object(Cn.a)((function(t){var e,n;return!(null===(n=null===(e=t)||void 0===e?void 0:e.tabs)||void 0===n?void 0:n.length)})),Object(Oe.b)(l.store$.select(y.b),(function(t){return t===p.a.Browser})),Object(_n.a)((function(){return Object(Mn.a)(Object(u.f)())})))})),this.alwaysLoadPaths$=Object(ze.c)((function(){return l.store$.select(M).pipe(Object(Cn.a)((function(t){var e;return null===(null===(e=t)||void 0===e?void 0:e.paths)})),Object(ii.a)("tab_idx"),Object(Oe.b)(l.store$.select(y.b),(function(t){return t===p.a.Browser})),Object(Oe.a)("reflating tab"),Object(Sn.a)((function(t){return Object(u.A)({location:t.location.present,reload:!0,tab_name:l.electronService.path.basename(t.location.present),track:!1})})))})),this.reflateTab$=Object(ze.c)((function(){return l.action$.pipe(Object(Oe.i)(p.a.Browser),Object(kn.a)((function(){return Object(Mn.a)(null).pipe(Object(xn.a)(l.store$.select(M)))})),Object(Cn.a)((function(t){var e=ai(t,2)[1];return!!e&&!e.paths})),Object(Sn.a)((function(t){var e=ai(t,2)[1];return Object(u.A)({location:e.location.present,reload:!0,tab_name:l.electronService.path.basename(e.location.present),track:!1})})))})),this.selectedFileToGraphData$=Object(ze.c)((function(){return l.action$.pipe(Object(ze.d)(u.m),Object(Sn.a)((function(t){return t.files[t.index]})),Object(Cn.a)((function(t){return!t.isDirectory})),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(l.store$.select(w.selectActivatedFiles)))})),Object(_n.a)((function(t){var e=ai(t,2),n=e[0],i=e[1];return i[n.path]&&null===i[n.path].edited?Object(Mn.a)(Object(W.j)([n.path])):ye.a})))})),this.onArrowKey$=Object(ze.c)((function(){return l.documentEventsService.onkeydown$.pipe(Object(Oe.b)(l.store$.select(y.b),(function(t){return t===p.a.Browser})),Object(Cn.a)((function(t){return"ArrowDown"===t.key||"ArrowUp"===t.key})),Object(Oe.a)("arrow key pressed"),Object(_n.a)((function(t){return Object(Mn.a)(Object(u.b)(t))})))})),this.onEnter$=Object(ze.c)((function(){return l.documentEventsService.onkeydown$.pipe(Object(Oe.b)(l.store$.select(y.b),(function(t){return t===p.a.Browser})),Object(Cn.a)((function(t){return"Enter"===t.key})),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(l.store$.select(I)))})),Object(Oe.a)("enter pressed"),Object(Cn.a)((function(t){var e;return!!(null===(e=ai(t,2)[1])||void 0===e?void 0:e.length)})),Object(Sn.a)((function(t){var e=ai(t,2)[1];return Object(u.y)(e[0])})))})),this.drives$=Object(ze.c)((function(){return l.driveListService.poll$.pipe(Object(Oe.b)(l.store$.select(y.b),(function(t){return t===p.a.Browser})),Object(Tn.a)(oi.a.production?1/0:1),Object(Oe.a)("device list"),Object(Sn.a)((function(t){return Object(u.N)(t)})))})),this.resetSearchText$=Object(ze.c)((function(){return l.action$.pipe(Object(ze.d)(u.i),Object(Sn.a)((function(){return Object(G.b)(null)})))})),this.checkActiveFiles$=Object(ze.c)((function(){return l.action$.pipe(Object(ze.d)(u.G),Object(Oe.h)(),Object(kn.a)((function(t){return Object(Mn.a)(t).pipe(Object(xn.a)(l.store$.select(U)))})),Object(Cn.a)((function(t){var e=ai(t,2);return!e[1].has(e[0].dirPath)})),Object(_n.a)((function(t){var e=ai(t,1)[0],n=e.activeFiles,i=e.dirPath;return Object(In.a)(n).pipe(Object(Oe.a)("checking file's existence"),Object(_n.a)((function(t){return Object(ri.a)(l.utils.stat$(t),l.engineService.datastore.graph.select(Vn.a).get$((function(e){return e.getMetadatumByPath(t)}))).pipe(Object(_n.a)((function(e){var n=ai(e,2),i=n[1];return i&&n[0].size!==i.fileSize?l.engineService.datastore.graph.select(Vn.a).put$((function(e){return e.handleUpdateEvent(t)})).pipe(Object(Sn.a)((function(e){return["updated",t,e]}))):ye.a})),Object(we.a)((function(e){return l.engineService.datastore.graph.select(Vn.a).put$((function(e){return e.handleDeleteEvent(t)})).pipe(Object(Sn.a)((function(e){return["deleted",t,e]})))})))})),Object(ci.a)(n.length),Object(_n.a)((function(t){var e=t.reduce((function(t,e){return t[e[0]].push([e[1],e[2]]),t}),{deleted:[],updated:[]}),n=e.deleted,c=e.updated,r=[Object(u.o)(i)];return n.length&&r.push(Object(W.W)(n),Object(W.f)(n.map((function(t){return t[1]})),!0)),c.length&&r.push(Object(W.rb)(c.map((function(t){return t[1]})))),r})),Object(Oe.a)("Checked nodes",z.d.plum))})))})),this.snapshotRecorded$=Object(ze.c)((function(){return l.action$.pipe(Object(ze.d)(W.Bb),Object(Sn.a)((function(t){var e=t.path;return Object(u.o)(e)})))}))}return t.\u0275fac=function(e){return new(e||t)(J.dc(ze.a),J.dc(o.b),J.dc(r.c),J.dc(r.a),J.dc(r.b),J.dc(jt.b),J.dc(jt.d),J.dc(c.a))},t.\u0275prov=J.Pb({token:t,factory:t.\u0275fac}),t}(),li=n("anw9"),ui=function(){function t(){}return t.\u0275mod=J.Rb({type:t}),t.\u0275inj=J.Qb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t}(),pi=function(){function t(){}return t.\u0275mod=J.Rb({type:t}),t.\u0275inj=J.Qb({factory:function(e){return new(e||t)},imports:[[i.c,yn.a,ui,ct.b]]}),t}();n.d(e,"BrowserModule",(function(){return bi}));var bi=function(){function t(){}return t.\u0275mod=J.Rb({type:t}),t.\u0275inj=J.Qb({factory:function(e){return new(e||t)},providers:[{provide:li.a,useValue:h},r.f],imports:[[i.c,jn,yn.a,o.d.forFeature(h,j,{initialState:g}),ze.b.forFeature([ei,si]),ct.b,pi,ui]]}),t}()}}]);